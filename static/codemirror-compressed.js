window.CodeMirror=function(){"use strict";function p(e,t){if(!(this instanceof p))return new p(e,t,!0);this.options=t=t||{};for(var n in Yt)!t.hasOwnProperty(n)&&Yt.hasOwnProperty(n)&&(t[n]=Yt[n]);S(t);var r=this.display=d(e);r.wrapper.CodeMirror=this,w(this),y(this),g(this),t.tabindex!=null&&(r.input.tabIndex=t.tabindex),t.autofocus&&ot(this),t.lineWrapping&&(r.wrapper.className+=" CodeMirror-wrap");var i=new Tn([new xn([new Sn("",null,K(r))])]);i.frontier=0,i.highlight=new Kn,i.tabSize=t.tabSize,this.view={doc:i,sel:{from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1,shift:!1},scrollTop:0,scrollLeft:0,overwrite:!1,focused:!1,maxLine:Cn(i,0),maxLineChanged:!1,suppressEdits:!1,goalColumn:null},v(this),this.setValue(t.value||""),i.history=new Dn,ut(this);var s;try{s=document.activeElement==r.input}catch(o){}s||t.autofocus?setTimeout(rr(xt,this),20):Tt(this);for(var n in nn)nn.propertyIsEnumerable(n)&&nn[n](this,t[n])}function d(e){var t={},r=t.input=ur("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none;");return r.setAttribute("wrap","off"),r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","off"),t.inputDiv=ur("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),t.scrollbarH=ur("div",[ur("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),t.scrollbarV=ur("div",[ur("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),t.scrollbarFiller=ur("div",null,"CodeMirror-scrollbar-filler"),t.lineDiv=ur("div"),t.selectionDiv=ur("div",null,null,"position: relative; z-index: 1"),t.cursor=ur("pre","\u00a0","CodeMirror-cursor"),t.otherCursor=ur("pre","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"),t.measure=ur("div",null,"CodeMirror-measure"),t.lineSpace=ur("div",[t.measure,t.cursor,t.otherCursor,t.selectionDiv,t.lineDiv],null,"position: relative; outline: none"),t.mover=ur("div",[ur("div",[t.lineSpace],"CodeMirror-lines")],null,"position: relative"),t.gutters=ur("div",null,"CodeMirror-gutters"),t.lineGutter=null,t.sizer=ur("div",[t.mover],"CodeMirror-sizer"),t.heightForcer=ur("div","\u00a0",null,"position: absolute; height: "+$n+"px"),t.scroller=ur("div",[t.sizer,t.heightForcer],"CodeMirror-scroll"),t.scroller.setAttribute("tabIndex","-1"),t.wrapper=ur("div",[t.gutters,t.inputDiv,t.scrollbarH,t.scrollbarV,t.scrollbarFiller,t.scroller],"CodeMirror"),n&&(t.gutters.style.zIndex=-1,t.scroller.style.paddingRight=0),e.appendChild?e.appendChild(t.wrapper):e(t.wrapper),l&&(r.style.width="0px"),i||(t.scroller.draggable=!0),a?(t.inputDiv.style.height="1px",t.inputDiv.style.position="absolute"):n&&(t.scrollbarH.style.minWidth=t.scrollbarV.style.minWidth="18px"),t.viewOffset=t.showingFrom=t.showingTo=t.lastSizeC=0,t.lineNumWidth=t.lineNumChars=null,t.prevInput="",t.alignWidgets=!1,t.pollingFast=!1,t.poll=new Kn,t.draggingText=!1,t.cachedCharWidth=t.cachedTextHeight=null,t.measureLineCache=[],t.measureLineCache.pos=0,t}function v(e){var t=e.view.doc;t.mode=p.getMode(e.options,e.options.mode),t.iter(0,t.size,function(e){e.stateAfter=null}),t.frontier=0,j(e,100)}function m(e){var t=e.view.doc;if(e.options.lineWrapping){e.display.wrapper.className+=" CodeMirror-wrap";var n=e.display.wrapper.clientWidth/Q(e.display)-3;t.iter(0,t.size,function(e){if(e.hidden)return;var t=Math.ceil(e.text.length/n)||1;t!=1&&kn(e,t)}),e.display.sizer.style.minWidth=""}else e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-wrap",""),E(e.view),t.iter(0,t.size,function(e){e.height!=1&&!e.hidden&&kn(e,1)});et(e,0,t.size)}function g(e){var t=un[e.options.keyMap].style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(t?" cm-keymap-"+t:"")}function y(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-")}function b(e){w(e),O(e,!0)}function w(e){var t=e.display.gutters,n=e.options.gutters;ar(t);for(var r=0;r<n.length;++r){var i=n[r],s=t.appendChild(ur("div",null,"CodeMirror-gutter "+i));i=="CodeMirror-linenumbers"&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none"}function E(e){e.maxLine=Cn(e.doc,0),e.maxLineChanged=!0;var t=e.maxLine.text.length;e.doc.iter(1,e.doc.size,function(n){var r=n.text;!n.hidden&&r.length>t&&(t=r.length,e.maxLine=n)})}function S(e){var t=!1;for(var n=0;n<e.gutters.length;++n)e.gutters[n]=="CodeMirror-linenumbers"&&(e.lineNumbers?t=!0:e.gutters.splice(n--,1));!t&&e.lineNumbers&&e.gutters.push("CodeMirror-linenumbers")}function x(e,t,n){e.sizer.style.minHeight=e.heightForcer.style.top=t+2*R(e)+"px";var r=e.scroller.scrollWidth>e.scroller.clientWidth,s=e.scroller.scrollHeight>e.scroller.clientHeight;s?(e.scrollbarV.style.display="block",e.scrollbarV.style.bottom=r?vr(e.measure)+"px":"0",e.scrollbarV.firstChild.style.height=e.scroller.scrollHeight-e.scroller.clientHeight+e.scrollbarV.clientHeight+"px",n!=null&&(e.scrollbarV.scrollTop=e.scroller.scrollTop=n,i&&setTimeout(function(){if(e.scrollbarV.scrollTop!=n)return;e.scrollbarV.scrollTop=n+(n?-1:1),e.scrollbarV.scrollTop=n},0))):e.scrollbarV.style.display="",r?(e.scrollbarH.style.display="block",e.scrollbarH.style.right=s?vr(e.measure)+"px":"0",e.scrollbarH.firstChild.style.width=e.scroller.scrollWidth-e.scroller.clientWidth+e.scrollbarH.clientWidth+"px"):e.scrollbarH.style.display="",r&&s?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=vr(e.measure)+"px"):e.scrollbarFiller.style.display="",f&&vr(e.measure)===0&&(e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight="12px")}function T(e,t,n){var r=(n!=null?n:e.scroller.scrollTop)-R(e),i=Math.max(0,Math.floor(r)),s=Math.ceil(r+e.wrapper.clientHeight);return{from:An(t,i),to:An(t,s)}}function N(e){if(e.alignWidgets){var t=L(e);for(var n=e.lineDiv.firstChild;n;n=n.nextSibling)for(var r=n.lastChild;r&&r.widget;r=r.prevSibling)r.widget.noHScroll&&(r.style.marginLeft=(r.widget.coverGutter?t:t+e.gutters.offsetWidth)+"px")}if(!e.lineGutter)return;var i=A(e)+"px";for(var n=e.lineDiv.firstChild;n;n=n.nextSibling)n.firstChild.style.left=i}function C(e){if(!e.options.lineNumbers)return!1;var t=e.view.doc,n=k(e.options,t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(ur("div",[ur("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt"));return r.lineNumWidth=i.firstChild.offsetWidth,r.lineNumChars=r.lineNumWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",!0}return!1}function k(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function L(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function A(e){return L(e)+e.lineGutter.offsetLeft}function O(e,t,n){var r=e.display.showingFrom,i=e.display.showingTo,s=M(e,t,n);return s&&(Xn(e,e,"update",e),(e.display.showingFrom!=r||e.display.showingTo!=i)&&Xn(e,e,"update",e,e.display.showingFrom,e.display.showingTo)),H(e),x(e.display,e.view.doc.height,n),s}function M(e,t,n){var r=e.display,i=e.view.doc;if(!r.wrapper.clientWidth){r.showingFrom=r.showingTo=r.viewOffset=0;return}var s=T(r,i,n);if(t!==!0&&t.length==0&&s.from>r.showingFrom&&s.to<r.showingTo)return;t&&t!==!0&&C(e)&&(t=!0),r.sizer.style.marginLeft=r.scrollbarH.style.left=r.gutters.offsetWidth+"px";var o=t===!0?0:Infinity;if(e.options.lineNumbers&&t&&t!==!0)for(var u=0;u<t.length;++u)if(t[u].diff){o=t[u].from;break}var a=Math.max(s.from-100,0),f=Math.min(i.size,s.to+100);r.showingFrom<a&&a-r.showingFrom<20&&(a=r.showingFrom),r.showingTo>f&&r.showingTo-f<20&&(f=Math.min(i.size,r.showingTo));var l=t===!0?[]:_([{from:r.showingFrom,to:r.showingTo,domStart:0}],t),c=0;for(var u=0;u<l.length;++u){var h=l[u];h.from<a&&(h.domStart+=a-h.from,h.from=a),h.to>f&&(h.to=f),h.from>=h.to?l.splice(u--,1):c+=h.to-h.from}if(c==f-a&&a==r.showingFrom&&f==r.showingTo)return;l.sort(function(e,t){return e.domStart-t.domStart}),r.lineDiv.style.display="none",D(e,a,f,l,o),r.lineDiv.style.display="";var p=a!=r.showingFrom||f!=r.showingTo||r.lastSizeC!=r.wrapper.clientHeight;p&&(r.lastSizeC=r.wrapper.clientHeight),r.showingFrom=a,r.showingTo=f,r.viewOffset=On(i,a),j(e,100);if(r.lineDiv.childNodes.length!=r.showingTo-r.showingFrom)throw new Error("BAD PATCH! "+JSON.stringify(l)+" size="+(r.showingTo-r.showingFrom)+" nodes="+r.lineDiv.childNodes.length);var d=r.lineDiv.firstChild,v=!1,m=d.offsetTop;return i.iter(r.showingFrom,r.showingTo,function(e){if(!d)return;if(!e.hidden){var t=d.offsetHeight+d.offsetTop,n=t-m,i=e.height-n;n<2&&(n=K(r)),m=t;if(i>.001||i<-0.001)kn(e,n),v=!0}d=d.nextSibling}),r.mover.style.top=r.viewOffset+"px",!0}function _(e,t){for(var n=0,r=t.length||0;n<r;++n){var i=t[n],s=[],o=i.diff||0;for(var u=0,a=e.length;u<a;++u){var f=e[u];i.to<=f.from&&i.diff?s.push({from:f.from+o,to:f.to+o,domStart:f.domStart}):i.to<=f.from||i.from>=f.to?s.push(f):(i.from>f.from&&s.push({from:f.from,to:i.from,domStart:f.domStart}),i.to<f.to&&s.push({from:i.to+o,to:f.to+o,domStart:f.domStart+(i.to-f.from)}))}e=s}return e}function D(e,t,r,i,s){function o(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var u=e.display,a=e.options.lineNumbers,f=a&&A(u);if(!i.length)ar(u.lineDiv);else{var l=0,c=u.lineDiv.firstChild,h;for(var p=0;p<i.length;++p){var d=i[p];while(d.domStart>l)c=o(c),l++;for(var v=d.from,m=d.to;v<m;++v)a&&s<=v&&c.firstChild&&lr(c.firstChild,k(e.options,v)),c=c.nextSibling,l++}while(c)c=o(c)}var g=i.shift(),c=u.lineDiv.firstChild,v=t,y=e.options.gutters;e.view.doc.iter(t,r,function(t){g&&g.to==v&&(g=i.shift());if(!g||g.from>v){if(t.hidden)var r=ur("div");else{var r=_n(e,t),s=t.gutterMarkers;t.className&&(r.className=t.className);if(a||s||t.bgClassName||t.widgets&&t.widgets.length){var o=[];a&&o.push(ur("div",k(e.options,v),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+f+"px; width: "+u.lineNumWidth+"px"));if(s)for(var l=0;l<y.length;++l){var h=y[l],p=s.hasOwnProperty(h)&&s[h];if(p){var d=u.gutters.childNodes[l];o.push(ur("div",[p],"CodeMirror-gutter-elt","left: "+(d.offsetLeft-u.gutters.offsetWidth)+"px; width: "+d.clientWidth+"px"))}}t.bgClassName&&o.push(ur("div","\u00a0",t.bgClassName+" CodeMirror-linebackground")),o.push(r);if(t.widgets)for(var m=0,b=t.widgets;m<b.length;++m){var w=b[m],E=ur("div",[w.node],"CodeMirror-linewidget");E.widget=w,w.noHScroll&&(E.style.width=u.wrapper.clientWidth+"px"),w.coverGutter&&(E.style.zIndex=5,E.style.position="relative",E.style.marginLeft=(w.noHScroll?L(u):-u.gutters.offsetWidth)+"px"),o.push(E)}r=ur("div",o,null,"position: relative"),n&&(r.style.zIndex=2)}}u.lineDiv.insertBefore(r,c)}else c=c.nextSibling;++v})}function P(e){return e.sel.inverted?e.sel.from:e.sel.to}function H(e){var t,n=e.display,r=e.view.doc,i=e.view.sel;if(Pt(i.from,i.to)){var s=t=V(e,i.from,"div");n.cursor.style.left=s.left+"px",n.cursor.style.top=s.top+"px",n.cursor.style.height=(s.bottom-s.top)*.85+"px",n.cursor.style.display="",n.selectionDiv.style.display="none",s.other?(n.otherCursor.style.display="",n.otherCursor.style.left=s.other.left+"px",n.otherCursor.style.top=s.other.top+"px",n.otherCursor.style.height=(s.other.bottom-s.other.top)*.85+"px"):n.otherCursor.style.display="none"}else{t=V(e,P(e.view),"div");var o=document.createDocumentFragment(),u=n.lineSpace.clientWidth,a=function(e,t,n,r){t<0&&(t=0),o.appendChild(ur("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(n==null?u:n)+"px; height: "+(r-t)+"px"))},f=i.from.line+1,l=i.to.line-1,c=i.from.line==i.to.line,h=function(t,i,s,o){var f=Cn(r,t),l=f.text.length,c=function(n){return X(e,{line:t,ch:n},"div",f)},h=o?Infinity:-Infinity;return br(Mn(f),i,s==null?l:s,function(e,t,r){var i=c(r=="rtl"?t-1:e),f=c(r=="rtl"?e:t-1),p=i.left,d=f.right;f.top-i.top>3&&(a(p,i.top,null,i.bottom),p=U(n),i.bottom<f.top&&a(p,i.bottom,null,f.top)),s==null&&t==l&&(d=u),h=o?Math.min(f.top,h):Math.max(f.bottom,h),a(p,f.top,d-p,f.bottom)}),h},p=Infinity,d=-Infinity;i.from.ch||c?p=h(i.from.line,i.from.ch,c?i.to.ch:null):f=i.from.line,!c&&i.to.ch&&(d=h(i.to.line,0,i.to.ch,!0));if(f<=l){var v=Cn(r,l),m=X(e,{line:l,ch:v.text.length},"div",v),g=f!=l||v.height>m.bottom-m.top?X(e,{line:f,ch:0},"div"):m;p=Math.min(p,g.top),d=Math.max(d,m.bottom)}p<d&&a(U(n),p,null,d),fr(n.selectionDiv,o),n.cursor.style.display=n.otherCursor.style.display="none",n.selectionDiv.style.display=""}var y=n.wrapper.getBoundingClientRect(),b=n.lineDiv.getBoundingClientRect();n.inputDiv.style.top=Math.max(0,Math.min(n.wrapper.clientHeight-10,t.top+b.top-y.top))+"px",n.inputDiv.style.left=Math.max(0,Math.min(n.wrapper.clientWidth-10,t.left+b.left-y.left))+"px"}function B(e){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursor.style.visibility=t.otherCursor.style.visibility="",t.blinker=setInterval(function(){t.cursor.style.visibility=t.otherCursor.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate)}function j(e,t){e.view.doc.frontier<e.display.showingTo&&e.view.doc.highlight.set(t,rr(F,e))}function F(e){var t=e.view.doc;if(t.frontier>=e.display.showingTo)return;var n=+(new Date)+e.options.workTime,r=rn(t.mode,q(t,t.frontier)),i=t.frontier;t.iter(t.frontier,e.display.showingTo,function(i){t.frontier>=e.display.showingFrom?(i.highlight(t.mode,r,e.options.tabSize),i.stateAfter=rn(t.mode,r)):(i.process(t.mode,r,e.options.tabSize),i.stateAfter=t.frontier%5==0?rn(t.mode,r):null),++t.frontier;if(+(new Date)>n)return j(e,e.options.workDelay),!0}),e.display.showingTo>i&&t.frontier>=e.display.showingFrom&&Z(e,function(){et(this,i,t.frontier)})()}function I(e,t){var n,r;for(var i=t,s=t-40;i>s;--i){if(i==0)return 0;var o=Cn(e,i-1);if(o.stateAfter)return i;var u=o.indentation(e.tabSize);if(r==null||n>u)r=i-1,n=u}return r}function q(e,t){var n=I(e,t),r=n&&Cn(e,n-1).stateAfter;return r?r=rn(e.mode,r):r=sn(e.mode),e.iter(n,t,function(i){i.process(e.mode,r,e.tabSize),i.stateAfter=n==t-1||n%5==0?rn(e.mode,r):null}),r}function R(e){return e.lineSpace.offsetTop}function U(e){var t=fr(e.measure,ur("pre")).appendChild(ur("span","x"));return t.offsetLeft}function z(e,n,r){var i=e.options.lineWrapping,s=e.display,o=e.display.measureLineCache;for(var u=0;u<o.length;++u){var a=o[u];if(a.ch==r&&a.text==n.text&&(!i||s.scroller.clientWidth==a.width))return{top:a.top,bottom:a.bottom,left:a.left,right:a.right}}var f=r&&r==n.text.length,l=_n(e,n,f?r-1:r);fr(s.measure,l);var c=l.anchor,h=c.offsetParent.getBoundingClientRect();c.style.verticalAlign="top";var p=c.getBoundingClientRect(),d=p.left-h.left,v=p.right-h.left;if(t){var m=c.offsetLeft;c.style.display="inline-block",i&&c.offsetLeft!=m&&(c.parentNode.insertBefore(document.createTextNode("\ufeff"),c),c.offsetLeft!=m&&c.parentNode.insertBefore(document.createTextNode("\ufeff"),c.nextSibling),c.offsetLeft!=m&&c.parentNode.removeChild(c.previousSibling))}var g=Math.max(0,p.top-h.top);c.style.verticalAlign="bottom";var y=Math.min(c.getBoundingClientRect().bottom-h.top,l.offsetHeight);f&&(d=v);var a={ch:r,text:n.text,width:s.wrapper.clientWidth,top:g,bottom:y,left:d,right:v};return o.length==8?o[++o.pos%8]=a:o.push(a),{top:g,bottom:y,left:d,right:v}}function W(e,t,n,r){if(r=="line")return n;var i=On(e.view.doc,t.line)-(r=="div"?e.display.viewOffset:0);if(r=="page"){var s=e.display.lineSpace.getBoundingClientRect();i+=s.top,n.left+=s.left,n.right+=s.right}return n.top+=i,n.bottom+=i,n}function X(e,t,n,r){return r||(r=Cn(e.view.doc,t.line)),W(e,t,z(e,r,t.ch),n)}function V(e,t,n,r){function i(i,s){var o=z(e,r,i);return s?o.left=o.right:o.right=o.left,W(e,t,o,n)}r=r||Cn(e.view.doc,t.line);var s=Mn(r),o=t.ch;if(!s)return i(o);var u,a,f=s[0].level;for(var l=0;l<s.length;++l){var c=s[l],h=c.level%2,p,d;if(c.from<o&&c.to>o)return i(o,h);var v=h?c.to:c.from,m=h?c.from:c.to;if(v==o)l&&c.level<(p=s[l-1]).level?d=i(p.level%2?p.from:p.to-1,!0):d=i(h&&c.from!=c.to?o-1:o),h==f?u=d:a=d;else if(m==o){var p=l<s.length-1&&s[l+1];if(!h&&p&&p.from==p.to)continue;p&&c.level<p.level?d=i(p.level%2?p.to-1:p.from):d=i(h?o:o-1,!0),h==f?u=d:a=d}}return f&&!o&&(a=i(s[0].to-1)),u?(a&&(u.other=a),u):a}function $(e,t,n){function h(t){var n=V(e,{line:u,ch:t},"line",a);if(f){c=!0;if(l>n.bottom)return Math.max(0,n.left-r.wrapper.clientWidth);if(l<n.top)return n.left+r.wrapper.clientWidth;c=!1}return n.left}var r=e.display,i=e.view.doc,s=Q(r),o=r.viewOffset+n;if(o<0)return{line:0,ch:0};var u=An(i,o);if(u>=i.size)return{line:i.size-1,ch:Cn(i,i.size-1).text.length};var a=Cn(i,u);if(!a.text.length)return{line:u,ch:0};var f=e.options.lineWrapping,l=f?o-On(i,u):0;t<0&&(t=0);var c=!1,p=Mn(a),d=a.text.length,v=Sr(a),m=0,g=xr(a),y;if(!p){var b=Math.min(g,Math.ceil((t+Math.floor(l/K(r))*r.wrapper.clientWidth*.9)/s));for(;;){var w=h(b);if(!(w<=t&&b<g)){y=w,g=b;break}b=Math.min(g,Math.ceil(b*1.2))}b=Math.floor(g*.8),w=h(b),w<t&&(v=b,m=w),d=g-v}else y=h(g);if(t>y)return{line:u,ch:g};for(;;){if(p?g==v||g==Cr(a,v,1):g-v<=1){var E=t-m<y-t,S=E?v:g;while(or.test(a.text.charAt(S)))++S;return{line:u,ch:S,after:E}}var x=Math.ceil(d/2),T=v+x;if(p){T=v;for(var N=0;N<x;++N)T=Cr(a,T,1)}var C=h(T);C>t?(g=T,y=C,c&&(y+=1e3),d-=x):(v=T,m=C,d=x)}}function K(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(J==null){J=ur("pre");for(var t=0;t<49;++t)J.appendChild(document.createTextNode("x")),J.appendChild(ur("br"));J.appendChild(document.createTextNode("x"))}fr(e.measure,J);var n=J.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),ar(e.measure),n||1}function Q(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=ur("span","x"),n=ur("pre",[t]);fr(e.measure,n);var r=t.offsetWidth;return r>2&&(e.cachedCharWidth=r),r||10}function G(e){e.curOp?++e.curOp.depth:e.curOp={depth:1,changes:[],delayedCallbacks:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,updateMaxLine:!1}}function Y(e){var t=e.curOp;if(--t.depth)return;e.curOp=null;var n=e.view,r=e.display;t.updateMaxLine&&E(n);if(n.maxLineChanged&&!e.options.lineWrapping){var i=z(e,n.maxLine,n.maxLine.text.length).left;r.sizer.style.minWidth=i+3+$n+"px",n.maxLineChanged=!1}var s,o;if(t.selectionChanged){var u=V(e,P(n));s=Vt(r,u.left,u.top,u.left,u.bottom)}if(t.changes.length||s&&s.scrollTop!=null)o=O(e,t.changes,s&&s.scrollTop);!o&&t.selectionChanged&&H(e),s&&Wt(e),t.selectionChanged&&B(e),n.focused&&(t.updateInput===!0||t.updateInput!==!1&&t.selectionChanged)&&st(e,t.userSelChange),t.textChanged&&Wn(e,"change",e,t.textChanged),t.selectionChanged&&Wn(e,"cursorActivity",e);for(var a=0;a<t.delayedCallbacks.length;++a)t.delayedCallbacks[a](e)}function Z(e,t){return function(){var n=e||this;G(n);try{var r=t.apply(n,arguments)}finally{Y(n)}return r}}function et(e,t,n,r){e.curOp.changes.push({from:t,to:n,diff:r})}function tt(e,t){var n=e.view.doc.history;n.startCompound();try{return t()}finally{n.endCompound()}}function nt(e){if(e.view.pollingFast)return;e.display.poll.set(e.options.pollInterval,function(){it(e),e.view.focused&&nt(e)})}function rt(e){function n(){var r=it(e);!r&&!t?(t=!0,e.display.poll.set(60,n)):(e.display.pollingFast=!1,nt(e))}var t=!1;e.display.pollingFast=!0,e.display.poll.set(20,n)}function it(e){var t=e.display.input,n=e.display.prevInput,r=e.view,i=r.sel;if(!r.focused||gr(t)||e.options.readOnly)return!1;var s=t.value;if(s==n)return!1;G(e),r.sel.shift=null;var o=0,u=Math.min(n.length,s.length);while(o<u&&n[o]==s[o])++o;return o<n.length?i.from={line:i.from.line,ch:i.from.ch-(n.length-o)}:r.overwrite&&Pt(i.from,i.to)&&(i.to={line:i.to.line,ch:Math.min(Cn(e.view.doc,i.to.line).text.length,i.to.ch+(s.length-o))}),e.replaceSelection(s.slice(o),"end"),s.length>1e3?t.value=e.display.prevInput="":e.display.prevInput=s,Y(e),!0}function st(e,t){var n=e.view;Pt(n.sel.from,n.sel.to)?t&&(e.display.prevInput=e.display.input.value=""):(e.display.prevInput="",e.display.input.value=e.getSelection(),n.focused&&er(e.display.input))}function ot(e){e.options.readOnly!="nocursor"&&e.display.input.focus()}function ut(t){function r(){t.view.focused&&setTimeout(rr(ot,t),0)}function i(e){if(t.options.onDragEvent&&t.options.onDragEvent(t,Hn(e)))return;Fn(e)}var n=t.display;Un(n.scroller,"mousedown",Z(t,ht)),Un(n.gutters,"mousedown",Z(t,dt)),Un(n.scroller,"dblclick",Z(t,Bn)),Un(n.lineSpace,"selectstart",function(e){at(n,e)||Bn(e)}),e||Un(n.scroller,"contextmenu",function(e){Ct(t,e)}),Un(n.scroller,"scroll",function(){n.scroller.scrollTop!=t.view.scrollTop&&(n.scrollbarV.scrollTop=t.view.scrollTop=n.scroller.scrollTop,O(t,[])),n.scroller.scrollLeft!=t.view.scrollLeft&&(n.scrollbarH.scrollLeft=t.view.scrollLeft=n.scroller.scrollLeft,N(t.display)),Wn(t,"scroll",t)}),Un(n.scrollbarV,"scroll",function(){n.scrollbarV.scrollTop!=t.view.scrollTop&&(n.scroller.scrollTop=t.view.scrollTop=n.scrollbarV.scrollTop,O(t,[]))}),Un(n.scrollbarH,"scroll",function(){n.scrollbarH.scrollLeft!=t.view.scrollLeft&&(n.scroller.scrollLeft=t.view.scrollLeft=n.scrollbarH.scrollLeft,N(t.display))}),Un(n.scrollbarH,"mousedown",r),Un(n.scrollbarV,"mousedown",r),Un(n.wrapper,"scroll",function(){n.wrapper.scrollTop=n.wrapper.scrollLeft=0}),Un(window,"resize",function s(){n.cachedCharWidth=n.cachedTextHeight=null,n.measureLineCache.length=n.measureLineCache.pos=0,n.wrapper.parentNode?O(t,!0):zn(window,"resize",s)}),Un(n.input,"keyup",Z(t,function(e){if(t.options.onKeyEvent&&t.options.onKeyEvent(t,Hn(e)))return;Rn(e,"keyCode")==16&&(t.view.sel.shift=null)})),Un(n.input,"input",rr(rt,t)),Un(n.input,"keydown",Z(t,Et)),Un(n.input,"keypress",Z(t,St)),Un(n.input,"focus",rr(xt,t)),Un(n.input,"blur",rr(Tt,t)),t.options.dragDrop&&(Un(n.scroller,"dragstart",function(e){vt(t,e)}),Un(n.scroller,"dragenter",i),Un(n.scroller,"dragover",i),Un(n.scroller,"drop",Z(t,pt))),Un(n.scroller,"paste",function(){ot(t),rt(t)}),Un(n.input,"paste",rr(rt,t)),Un(n.input,"cut",Z(t,function(){this.options.readOnly||t.replaceSelection("")})),a&&Un(n.sizer,"mouseup",function(){document.activeElement==n.input&&n.input.blur(),ot(t)})}function at(e,t){for(var n=In(t);n!=e.wrapper;n=n.parentNode)if(/\bCodeMirror-linewidget\b/.test(n.className)||n.parentNode==e.sizer&&n!=e.mover)return!0}function ft(e,t,n){var r=e.display;if(!n){var i=In(t);if(i==r.scrollbarH||i==r.scrollbarH.firstChild||i==r.scrollbarV||i==r.scrollbarV.firstChild||i==r.scrollbarFiller)return null}var s,o,u=r.lineSpace.getBoundingClientRect();try{s=t.clientX,o=t.clientY}catch(t){return null}return $(e,s-u.left,o-u.top)}function ht(n){function g(e){if(c=="single")Rt(r,f,e);else if(c=="double"){var t=Qt(Cn(a,e.line).text,e);Ht(e,v)?Rt(r,t.from,m):Rt(r,v,t.to)}else c=="triple"&&(Ht(e,v)?Rt(r,m,Ft(a,{line:e.line,ch:0})):Rt(r,v,Ft(a,{line:e.line+1,ch:0})))}function w(e){var t=++b,n=ft(r,e,!0);if(!n)return;if(!Pt(n,p)){o.focused||xt(r),p=n,g(n),r.curOp.updateInput=!1;var i=T(s,a);(n.line>=i.to||n.line<i.from)&&setTimeout(Z(r,function(){b==t&&w(e)}),150)}else{var u=e.clientY<y.top?-20:e.clientY>y.bottom?20:0;u&&setTimeout(Z(r,function(){if(b!=t)return;s.scroller.scrollTop+=u,w(e)}),50)}}function E(e){b=Infinity;var t=ft(r,e);t&&g(t),Bn(e),ot(r),r.curOp.updateInput=!0,zn(document,"mousemove",S),zn(document,"mouseup",x)}var r=this,s=r.display,o=r.view,u=o.sel,a=o.doc;qt(r.view,Rn(n,"shiftKey"));if(at(s,n)){i||(s.scroller.draggable=!1,setTimeout(function(){s.scroller.draggable=!0},100));return}if(dt.call(r,n))return;var f=ft(r,n);switch(qn(n)){case 3:e&&Ct.call(r,r,n);return;case 2:f&&Rt(r,f,f),setTimeout(rr(ot,r),20),Bn(n);return}if(!f){In(n)==s.scroller&&Bn(n);return}o.focused||xt(r);var l=+(new Date),c="single";if(ct&&ct.time>l-400&&Pt(ct.pos,f))c="triple",Bn(n),setTimeout(rr(ot,r),20),Gt(r,f.line);else if(lt&&lt.time>l-400&&Pt(lt.pos,f)){c="double",ct={time:l,pos:f},Bn(n);var h=Qt(Cn(a,f.line).text,f);Rt(r,h.from,h.to)}else lt={time:l,pos:f};var p=f;if(r.options.dragDrop&&cr&&!r.options.readOnly&&!Pt(u.from,u.to)&&!Ht(f,u.from)&&!Ht(u.to,f)&&c=="single"){var d=Z(r,function(e){i&&(s.scroller.draggable=!1),o.draggingText=!1,zn(document,"mouseup",d),zn(s.scroller,"drop",d),Math.abs(n.clientX-e.clientX)+Math.abs(n.clientY-e.clientY)<10&&(Bn(e),Rt(r,f,f),ot(r))});i&&(s.scroller.draggable=!0),o.draggingText=!0,s.scroller.dragDrop&&s.scroller.dragDrop(),Un(document,"mouseup",d),Un(s.scroller,"drop",d);return}Bn(n),c=="single"&&Rt(r,f,f);var v=u.from,m=u.to,y=s.wrapper.getBoundingClientRect(),b=0,S=Z(r,function(e){Bn(e),!t&&!qn(e)?E(e):w(e)}),x=Z(r,E);Un(document,"mousemove",S),Un(document,"mouseup",x)}function pt(e){var t=this;if(t.options.onDragEvent&&t.options.onDragEvent(t,Hn(e)))return;Bn(e);var n=ft(t,e,!0),r=e.dataTransfer.files;if(!n||t.options.readOnly)return;if(r&&r.length&&window.FileReader&&window.File){var i=r.length,s=Array(i),o=0,u=function(e,r){var u=new FileReader;u.onload=function(){s[r]=u.result,++o==i&&(n=Ft(t.view.doc,n),Z(t,function(){var e=_t(t,s.join(""),n,n);Rt(t,n,e)})())},u.readAsText(e)};for(var a=0;a<i;++a)u(r[a],a)}else{if(t.view.draggingText&&!Ht(n,t.view.sel.from)&&!Ht(t.view.sel.to,n))return;try{var s=e.dataTransfer.getData("Text");s&&tt(t,function(){var e=t.view.sel.from,r=t.view.sel.to;Rt(t,n,n),t.view.draggingText&&_t(t,"",e,r),t.replaceSelection(s),ot(t)})}catch(e){}}}function dt(e){var t=this,n=t.display;try{var r=e.clientX,i=e.clientY}catch(e){return!1}if(r>=Math.floor(n.gutters.getBoundingClientRect().right))return!1;if(Vn(t,"gutterClick")){i-=n.wrapper.getBoundingClientRect().top;for(var s=0;s<t.options.gutters.length;++s){var o=n.gutters.childNodes[s];if(o&&o.getBoundingClientRect().right>=r){if(i<n.lineDiv.offsetHeight){var u=An(t.view.doc,i),a=t.options.gutters[s];Xn(t,t,"gutterClick",t,u,a,e)}break}}}return Bn(e),!0}function vt(e,t){var n=e.getSelection();t.dataTransfer.setData("Text",n),t.dataTransfer.setDragImage&&t.dataTransfer.setDragImage(ur("img"),0,0)}function mt(e,t,n){if(typeof t=="string"){t=on[t];if(!t)return!1}var r=e.view,i=r.sel.shift;try{e.options.readOnly&&(r.suppressEdits=!0),n&&(r.sel.shift=null),t(e)}catch(s){if(s!=Jn)throw s;return!1}finally{r.sel.shift=i,r.suppressEdits=!1}return!0}function yt(e,n){function l(){f=!0}var r=an(e.options.keyMap),i=r.auto;clearTimeout(gt),i&&!ln(n)&&(gt=setTimeout(function(){an(e.options.keyMap)==r&&(e.options.keyMap=i.call?i.call(null,e):i)},50));var s=yr[Rn(n,"keyCode")],u=!1,a=o&&c;if(s==null||n.altGraphKey)return!1;Rn(n,"altKey")&&(s="Alt-"+s),Rn(n,a?"metaKey":"ctrlKey")&&(s="Ctrl-"+s),Rn(n,a?"ctrlKey":"metaKey")&&(s="Cmd-"+s);var f=!1;return Rn(n,"shiftKey")?u=fn("Shift-"+s,e.options.extraKeys,e.options.keyMap,function(t){return mt(e,t,!0)},l)||fn(s,e.options.extraKeys,e.options.keyMap,function(t){if(typeof t=="string"&&/^go[A-Z]/.test(t))return mt(e,t)},l):u=fn(s,e.options.extraKeys,e.options.keyMap,function(t){return mt(e,t)},l),f&&(u=!1),u&&(Bn(n),B(e),t&&(n.oldKeyCode=n.keyCode,n.keyCode=0)),u}function bt(e,t,n){var r=fn("'"+n+"'",e.options.extraKeys,e.options.keyMap,function(t){return mt(e,t,!0)});return r&&(Bn(t),B(e)),r}function Et(e){var n=this;n.view.focused||xt(n),t&&e.keyCode==27&&(e.returnValue=!1),n.display.pollingFast&&it(n)&&(n.display.pollingFast=!1);if(n.options.onKeyEvent&&n.options.onKeyEvent(n,Hn(e)))return;var r=Rn(e,"keyCode");qt(n.view,r==16||Rn(e,"shiftKey"));var i=yt(n,e);o&&(wt=i?r:null,!i&&r==88&&Rn(e,c?"metaKey":"ctrlKey")&&n.replaceSelection(""))}function St(e){var t=this;t.display.pollingFast&&it(t);if(t.options.onKeyEvent&&t.options.onKeyEvent(t,Hn(e)))return;var n=Rn(e,"keyCode"),r=Rn(e,"charCode");if(o&&n==wt){wt=null,Bn(e);return}if((o&&(!e.which||e.which<10)||a)&&yt(t,e))return;var i=String.fromCharCode(r==null?n:r);this.options.electricChars&&this.view.doc.mode.electricChars&&this.options.smartIndent&&!this.options.readOnly&&this.view.doc.mode.electricChars.indexOf(i)>-1&&setTimeout(Z(t,function(){$t(t,t.view.sel.to.line,"smart")}),75);if(bt(t,e,i))return;rt(t)}function xt(e){if(e.options.readOnly=="nocursor")return;e.view.focused||(Wn(e,"focus",e),e.view.focused=!0,e.display.scroller.className.search(/\bCodeMirror-focused\b/)==-1&&(e.display.scroller.className+=" CodeMirror-focused")),nt(e),B(e)}function Tt(e){e.view.focused&&(Wn(e,"blur",e),e.view.focused=!1,e.display.scroller.className=e.display.scroller.className.replace(" CodeMirror-focused","")),clearInterval(e.display.blinker),setTimeout(function(){e.view.focused||(e.view.sel.shift=null)},150)}function Ct(t,n){function l(){i.inputDiv.style.position="relative",i.input.style.cssText=f,r&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=a),nt(t);if(i.input.selectionStart!=null){clearTimeout(Nt);var e=i.input.value=" "+(Pt(s.from,s.to)?"":i.input.value),n=0;i.prevInput=" ",i.input.selectionStart=1,i.input.selectionEnd=e.length,Nt=setTimeout(function o(){i.prevInput==" "&&i.input.selectionStart==0?Z(t,on.selectAll)(t):n++<10?Nt=setTimeout(o,500):st(t)},200)}}var i=t.display,s=t.view.sel,u=ft(t,n),a=i.scroller.scrollTop;if(!u||o)return;(Pt(s.from,s.to)||Ht(u,s.from)||!Ht(u,s.to))&&Z(t,Ut)(t,u,u);var f=i.input.style.cssText;i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(n.clientY-5)+"px; left: "+(n.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",ot(t),st(t,!0),Pt(s.from,s.to)&&(i.input.value=i.prevInput=" "),e?(Fn(n),Un(window,"mouseup",function c(){zn(window,"mouseup",c),setTimeout(l,20)})):setTimeout(l,50)}function kt(e,t,n,r,i,s){var o=e.view,u=o.doc;if(o.suppressEdits)return;var a=[];u.iter(t.line,n.line+1,function(e){a.push(bn(e.text,e.markedSpans))});if(u.history){u.history.addChange(t.line,r.length,a);while(u.history.done.length>e.options.undoDepth)u.history.done.shift()}var f=mn(yn(a[0]),yn(Zn(a)),t.ch,n.ch,r);Mt(e,t,n,f,i,s)}function Lt(e,t,n){var r=e.view.doc;if(!t.length)return;var i=t.pop(),s=[];for(var o=i.length-1;o>=0;o-=1){var u=i[o],a=[],f=u.start+u.added;r.iter(u.start,f,function(e){a.push(bn(e.text,e.markedSpans))}),s.push({start:u.start,added:u.old.length,old:a});var l={line:u.start+u.old.length-1,ch:tr(gn(Zn(a)),gn(Zn(u.old)))};Mt(e,{line:u.start,ch:0},{line:f-1,ch:Cn(r,f-1).text.length},u.old,l,l)}e.curOp.updateInput=!0,n.push(s)}function At(e){var t=e.view.doc.history;Lt(e,t.done,t.undone)}function Ot(e){var t=e.view.doc.history;Lt(e,t.undone,t.done)}function Mt(e,t,n,r,i,s){var o=e.view,u=o.doc,a=e.display;if(o.suppressEdits)return;var f=!1,l=o.maxLine.text.length;e.options.lineWrapping||u.iter(t.line,n.line+1,function(e){if(!e.hidden&&e.text.length==l)return f=!0,!0});var c=n.line-t.line,h=Cn(u,t.line),p=Cn(u,n.line),d=Zn(r),v=K(a);if(t.ch==0&&n.ch==0&&gn(d)==""){var m=[],g=null;for(var y=0,b=r.length-1;y<b;++y)m.push(new Sn(gn(r[y]),yn(r[y]),v));p.update(p.text,yn(d),e),c&&u.remove(t.line,c,e),m.length&&u.insert(t.line,m)}else if(h==p)if(r.length==1)h.update(h.text.slice(0,t.ch)+gn(r[0])+h.text.slice(n.ch),yn(r[0]),e);else{for(var m=[],y=1,b=r.length-1;y<b;++y)m.push(new Sn(gn(r[y]),yn(r[y]),v));m.push(new Sn(gn(d)+h.text.slice(n.ch),yn(d),v)),h.update(h.text.slice(0,t.ch)+gn(r[0]),yn(r[0]),e),u.insert(t.line+1,m)}else if(r.length==1)h.update(h.text.slice(0,t.ch)+gn(r[0])+p.text.slice(n.ch),yn(r[0]),e),u.remove(t.line+1,c,e);else{var m=[];h.update(h.text.slice(0,t.ch)+gn(r[0]),yn(r[0]),e),p.update(gn(d)+p.text.slice(n.ch),yn(d),e);for(var y=1,b=r.length-1;y<b;++y)m.push(new Sn(gn(r[y]),yn(r[y]),v));c>1&&u.remove(t.line+1,c-1,e),u.insert(t.line+1,m)}if(e.options.lineWrapping){var w=Math.max(5,a.scroller.clientWidth/Q(a)-3);u.iter(t.line,t.line+r.length,function(e){if(e.hidden)return;var t=(Math.ceil(e.text.length/w)||1)*v;t!=e.height&&kn(e,t)})}else u.iter(t.line,t.line+r.length,function(e){var t=e.text;!e.hidden&&t.length>l&&(o.maxLine=e,l=t.length,o.maxLineChanged=!0,f=!1)}),f&&(e.curOp.updateMaxLine=!0);u.frontier=Math.min(u.frontier,t.line),j(e,400);var E=r.length-c-1;et(e,t.line,n.line+1,E);if(Vn(e,"change")){for(var y=0;y<r.length;++y)typeof r[y]!="string"&&(r[y]=r[y].text);var S={from:t,to:n,text:r};if(e.curOp.textChanged){for(var x=e.curOp.textChanged;x.next;x=x.next);x.next=S}else e.curOp.textChanged=S}Ut(e,Ft(u,i),Ft(u,s),!0)}function _t(e,t,n,r){function s(e){if(Ht(e,n))return e;if(!Ht(r,e))return o;var i=e.line+t.length-(r.line-n.line)-1,s=e.ch;return e.line==r.line&&(s+=Zn(t).length-(r.ch-(r.line==n.line?n.ch:0))),{line:i,ch:s}}r||(r=n);if(Ht(r,n)){var i=r;r=n,n=i}t=mr(t);var o;return Dt(e,t,n,r,function(t){return o=t,{from:s(e.view.sel.from),to:s(e.view.sel.to)}}),o}function Dt(e,t,n,r,i){var s=t.length==1?t[0].length+n.ch:Zn(t).length,o=i({line:n.line+t.length-1,ch:s});kt(e,n,r,t,o.from,o.to)}function Pt(e,t){return e.line==t.line&&e.ch==t.ch}function Ht(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function Bt(e){return{line:e.line,ch:e.ch}}function jt(e,t){return Math.max(0,Math.min(t,e.size-1))}function Ft(e,t){if(t.line<0)return{line:0,ch:0};if(t.line>=e.size)return{line:e.size-1,ch:Cn(e,e.size-1).text.length};var n=t.ch,r=Cn(e,t.line).text.length;return n==null||n>r?{line:t.line,ch:r}:n<0?{line:t.line,ch:0}:t}function It(e,t){return t>=0&&t<e.size}function qt(e,t){t?e.sel.shift=e.sel.shift||P(e):e.sel.shift=null}function Rt(e,t,n){var r=e.view,i=r.sel.shift;i&&(i=Ft(r.doc,i),Ht(i,t)?t=i:Ht(n,i)&&(n=i)),Ut(e,t,n),e.curOp.userSelChange=!0}function Ut(e,t,n,r){var i=e.view.sel,s=e.view.doc;e.view.goalColumn=null;if(Pt(i.from,t)&&Pt(i.to,n))return;if(Ht(n,t)){var o=n;n=t,t=o}if(r||t.line!=i.from.line){var u=zt(s,t,i.from.line,i.from.ch,e);u?t=u:e.unfoldLines(Cn(s,t.line).hidden.id)}if(r||n.line!=i.to.line)n=zt(s,n,i.to.line,i.to.ch,e);Pt(t,n)?i.inverted=!1:Pt(t,i.to)?i.inverted=!1:Pt(n,i.from)&&(i.inverted=!0);if(e.options.autoClearEmptyLines&&Pt(i.from,i.to)){var a=P(e.view);if(a.line!=i.from.line&&i.from.line<s.size){var f=Cn(s,i.from.line);/^\s+$/.test(f.text)&&setTimeout(Z(e,function(){if(f.parent&&/^\s+$/.test(f.text)){var t=Ln(f);_t(e,"",{line:t,ch:0},{line:t,ch:f.text.length})}},10))}}i.from=t,i.to=n,e.curOp.selectionChanged=!0}function zt(e,t,n,r,i){function s(n){var i=t.line+n,s=n==1?e.size:-1;while(i!=s){var o=Cn(e,i);if(!o.hidden){var a=t.ch;if(u||a>r||a>o.text.length)a=o.text.length;return{line:i,ch:a}}i+=n}}var o=Cn(e,t.line);while(i&&o.hidden&&o.hidden.handle.unfoldOnEnter)i.unfoldLines(o.hidden.handle);if(!o.hidden)return t;var u=t.ch==o.text.length&&t.ch!=r;return t.line>=n?s(1)||s(-1):s(-1)||s(1)}function Wt(e){var t=e.view,n=V(e,P(t));Xt(e.display,n.left,n.top,n.left,n.bottom);if(!t.focused)return;var r=e.display,i=r.sizer.getBoundingClientRect(),s=null;n.top+i.top<0?s=!0:n.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(s=!1);if(s!=null){var o=r.cursor.style.display=="none";o&&(r.cursor.style.display="",r.cursor.style.left=n.left+"px",r.cursor.style.top=n.top-r.viewOffset+"px"),r.cursor.scrollIntoView(s),o&&(r.cursor.style.display="none")}}function Xt(e,t,n,r,i){var s=Vt(e,t,n,r,i);s.scrollLeft!=null&&(e.scrollbarH.scrollLeft=e.scroller.scrollLeft=s.scrollLeft),s.scrollTop!=null&&(e.scrollbarV.scrollTop=e.scroller.scrollTop=s.scrollTop)}function Vt(e,t,n,r,i){var s=R(e);n+=s,i+=s;var o=e.scroller.clientHeight-$n,u=e.scroller.scrollTop,a={},f=e.scroller.scrollHeight-$n,l=n<s+10,c=i+s>f-10;n<u?a.scrollTop=l?0:Math.max(0,n):i>u+o&&(a.scrollTop=c?f:i-o);var h=e.scroller.clientWidth-$n,p=e.scroller.scrollLeft;t+=e.gutters.offsetWidth,r+=e.gutters.offsetWidth;var d=e.gutters.offsetWidth,v=t<d+10;return t<p+d||v?(v&&(t=0),a.scrollLeft=Math.max(0,t-10-d)):r>h+p-3&&(a.scrollLeft=r+10-h),a}function $t(e,t,n){var r=e.view.doc;n||(n="add");if(n=="smart")if(!r.mode.indent)n="prev";else var i=q(r,t);var s=Cn(r,t),o=s.indentation(r.tabSize),u=s.text.match(/^\s*/)[0],a;n=="smart"&&(a=r.mode.indent(i,s.text.slice(u.length),s.text),a==Jn&&(n="prev")),n=="prev"?t?a=Cn(r,t-1).indentation(r.tabSize):a=0:n=="add"?a=o+e.options.indentUnit:n=="subtract"&&(a=o-e.options.indentUnit),a=Math.max(0,a);var f=a-o,l="",c=0;if(e.options.indentWithTabs)for(var h=Math.floor(a/r.tabSize);h;--h)c+=r.tabSize,l+="	";c<a&&(l+=Yn(a-c)),l!=u&&_t(e,l,{line:t,ch:0},{line:t,ch:u.length})}function Jt(e,t,n){var r=t,i=t,s=e.view.doc;return typeof t=="number"?i=Cn(s,jt(s,t)):r=Ln(t),r==null?null:n(i,r)?(et(e,r,r+1),i):null}function Kt(e,t,n,r){function f(){for(var e=o+t,n=t<0?-1:i.size;e!=n;e+=t){var r=Cn(i,e);if(!r.hidden||!r.hidden.handle.unfoldOnEneter)return o=e,a=r,!0}}function l(e){var n=(r?Cr:kr)(a,u,t,!0);if(n==null){if(!!e||!f())return!1;r?u=(t<0?xr:Sr)(a):u=t<0?a.text.length:0}else u=n;return!0}var i=e.view.doc,s=P(e.view),o=s.line,u=s.ch,a=Cn(i,o);if(n=="char")l();else if(n=="column")l(!0);else if(n=="word"){var c=!1;for(;;){if(t<0&&!l())break;if(ir(a.text.charAt(u)))c=!0;else if(c){t<0&&(t=1,l());break}if(t>0&&!l())break}}return{line:o,ch:u}}function Qt(e,t){var n=t.ch,r=t.ch;if(e){t.after===!1||r==e.length?--n:++r;var i=e.charAt(n),s=ir(i)?ir:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ir(e)};while(n>0&&s(e.charAt(n-1)))--n;while(r<e.length&&s(e.charAt(r)))++r}return{from:{line:t.line,ch:n},to:{line:t.line,ch:r}}}function Gt(e,t){Rt(e,{line:t,ch:0},Ft(e.view.doc,{line:t+1,ch:0}))}function rn(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function sn(e,t,n){return e.startState?e.startState(t,n):!0}function an(e){return typeof e=="string"?un[e]:e}function fn(e,t,n,r,i){function s(t){t=an(t);var n=t[e];if(n===!1)return i&&i(),!0;if(n!=null&&r(n))return!0;if(t.nofallthrough)return i&&i(),!0;var o=t.fallthrough;if(o==null)return!1;if(Object.prototype.toString.call(o)!="[object Array]")return s(o);for(var u=0,a=o.length;u<a;++u)if(s(o[u]))return!0;return!1}return t&&s(t)?!0:s(n)}function ln(e){var t=yr[Rn(e,"keyCode")];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function cn(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8}function hn(e,t,n){this.lines=[],this.type=t,this.cm=e,n&&(this.style=n)}function pn(e,t,n){if(e)for(var r=0;r<e.length;++r){var i=e[r];if(i.marker==t)return n&&e.splice(r,1),i}}function dn(e,t,n){if(e)for(var r=0,i;r<e.length;++r){var s=e[r],o=s.marker,u=s.from==null||(o.inclusiveLeft?s.from<=t:s.from<t);if(u||o.type=="bookmark"&&s.from==t&&s.from!=n){var a=s.to==null||(o.inclusiveRight?s.to>=t:s.to>t);(i||(i=[])).push({from:s.from,to:a?null:s.to,marker:o})}}return i}function vn(e,t){if(e)for(var n=0,r;n<e.length;++n){var i=e[n],s=i.marker,o=i.to==null||(s.inclusiveRight?i.to>=t:i.to>t);if(o||s.type=="bookmark"&&i.from==t){var u=i.from==null||(s.inclusiveLeft?i.from<=t:i.from<t);(r||(r=[])).push({from:u?null:i.from-t,to:i.to==null?null:i.to-t,marker:s})}}return r}function mn(e,t,n,r,i){if(!e&&!t)return i;var s=dn(e,n),o=vn(t,r),u=i.length==1,a=Zn(i).length+(u?n:0);if(s)for(var f=0;f<s.length;++f){var l=s[f];if(l.to==null){var c=pn(o,l.marker);c?u&&(l.to=c.to==null?null:c.to+a):l.to=n}}if(o)for(var f=0;f<o.length;++f){var l=o[f];l.to!=null&&(l.to+=a);if(l.from==null){var c=pn(s,l.marker);c||(l.from=a,u&&(s||(s=[])).push(l))}else l.from+=a,u&&(s||(s=[])).push(l)}var h=[bn(i[0],s)];if(!u){var p=i.length-2,d;if(p>0&&s)for(var f=0;f<s.length;++f)s[f].to==null&&(d||(d=[])).push({from:null,to:null,marker:s[f].marker});for(var f=0;f<p;++f)h.push(bn(i[f+1],d));h.push(bn(Zn(i),o))}return h}function gn(e){return typeof e=="string"?e:e.text}function yn(e){return typeof e=="string"?null:e.markedSpans}function bn(e,t){return t?{text:e,markedSpans:t}:e}function wn(e){var t=e.markedSpans;if(!t)return;for(var n=0;n<t.length;++n){var r=t[n].marker.lines,i=nr(r,e);r.splice(i,1)}e.markedSpans=null}function En(e,t){if(!t)return;for(var n=0;n<t.length;++n)var r=t[n].marker.lines.push(e);e.markedSpans=t}function Sn(e,t,n){this.text=e,this.height=n,En(this,t)}function xn(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,r=0;t<n;++t)e[t].parent=this,r+=e[t].height;this.height=r}function Tn(e){this.children=e;var t=0,n=0;for(var r=0,i=e.length;r<i;++r){var s=e[r];t+=s.chunkSize(),n+=s.height,s.parent=this}this.size=t,this.height=n,this.parent=null}function Nn(e){for(var t=e.parent;t&&t.parent;t=t.parent);return t}function Cn(e,t){while(!e.lines)for(var n=0;;++n){var r=e.children[n],i=r.chunkSize();if(t<i){e=r;break}t-=i}return e.lines[t]}function kn(e,t){var n=t-e.height;for(var r=e;r;r=r.parent)r.height+=n}function Ln(e){if(e.parent==null)return null;var t=e.parent,n=nr(t.lines,e);for(var r=t.parent;r;t=r,r=r.parent)for(var i=0,s=r.children.length;;++i){if(r.children[i]==t)break;n+=r.children[i].chunkSize()}return n}function An(e,t){var n=0;e:do{for(var r=0,i=e.children.length;r<i;++r){var s=e.children[r],o=s.height;if(t<o){e=s;continue e}t-=o,n+=s.chunkSize()}return n}while(!e.lines);for(var r=0,i=e.lines.length;r<i;++r){var u=e.lines[r],a=u.height;if(t<a)break;t-=a}return n+r}function On(e,t){var n=0;e:do{for(var r=0,i=e.children.length;r<i;++r){var s=e.children[r],o=s.chunkSize();if(t<o){e=s;continue e}t-=o,n+=s.height}return n}while(!e.lines);for(var r=0;r<t;++r)n+=e.lines[r].height;return n}function Mn(e){var t=e.order;return t==null&&(t=e.order=Lr(e.text)),t}function _n(e,t,n){if(!t.styles){var r=Nn(t);t.highlight(r.mode,t.stateAfter=q(r,Ln(t)),e.options.tabSize)}return t.getContent(e.options.tabSize,n,e.options.lineWrapping)}function Dn(){this.time=0,this.done=[],this.undone=[],this.compound=0,this.closed=!1}function Pn(){Fn(this)}function Hn(e){return e.stop||(e.stop=Pn),e}function Bn(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function jn(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Fn(e){Bn(e),jn(e)}function In(e){return e.target||e.srcElement}function qn(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),c&&e.ctrlKey&&t==1&&(t=3),t}function Rn(e,t){var n=e.override&&e.override.hasOwnProperty(t);return n?e.override[t]:e[t]}function Un(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={}),i=r[t]||(r[t]=[]);i.push(n)}}function zn(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers&&e._handlers[t];if(!r)return;for(var i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}}}function Wn(e,t){var n=e._handlers&&e._handlers[t];if(!n)return;var r=Array.prototype.slice.call(arguments,2);for(var i=0;i<n.length;++i)n[i].apply(null,r)}function Xn(e,t,n){function o(e){return function(){e.apply(null,i)}}var r=t._handlers&&t._handlers[n];if(!r)return;var i=Array.prototype.slice.call(arguments,3),s=e.curOp&&e.curOp.delayedCallbacks;for(var u=0;u<r.length;++u)s?s.push(o(r[u])):r[u].apply(null,i)}function Vn(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function Kn(){this.id=null}function Qn(e,t,n){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var r=0,i=0;r<t;++r)e.charAt(r)=="	"?i+=n-i%n:++i;return i}function Yn(e){while(Gn.length<=e)Gn.push(Zn(Gn)+" ");return Gn[e]}function Zn(e){return e[e.length-1]}function er(e){l?(e.selectionStart=0,e.selectionEnd=e.value.length):e.select()}function tr(e,t){if(!t)return 0;if(!e)return t.length;for(var n=e.length,r=t.length;n>=0&&r>=0;--n,--r)if(e.charAt(n)!=t.charAt(r))break;return r+1}function nr(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;++n)if(e[n]==t)return n;return-1}function rr(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function ir(e){return/\w/.test(e)||e.toUpperCase()!=e.toLowerCase()}function sr(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&e[n]&&++t;return!t}function ur(e,t,n,r){var i=document.createElement(e);n&&(i.className=n),r&&(i.style.cssText=r);if(typeof t=="string")lr(i,t);else if(t)for(var s=0;s<t.length;++s)i.appendChild(t[s]);return i}function ar(e){return e.innerHTML="",e}function fr(e,t){return ar(e).appendChild(t)}function lr(e,t){r?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function vr(e){if(dr!=null)return dr;var t=ur("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return fr(e,t),t.offsetWidth&&(dr=t.offsetHeight-t.clientHeight),dr||0}function br(e,t,n,r){if(!e)return r(t,n,"ltr");for(var i=0;i<e.length;++i){var s=e[i];s.from<n&&s.to>t&&r(Math.max(s.from,t),Math.min(s.to,n),s.level==1?"rtl":"ltr")}}function wr(e){return e.level%2?e.to:e.from}function Er(e){return e.level%2?e.from:e.to}function Sr(e){var t=Mn(e);return t?wr(t[0]):0}function xr(e){var t=Mn(e);return t?Er(Zn(t)):e.text.length}function Tr(e){var t=Mn(e);return t?t[0].level%2?xr(e):Sr(e):0}function Nr(e){var t=Mn(e);return t?t[0].level%2?Sr(e):xr(e):e.text.length}function Cr(e,t,n,r){var i=Mn(e);if(!i)return kr(e,t,n,r);var s=r?function(t,n){do t+=n;while(t>0&&or.test(e.text.charAt(t)));return t}:function(e,t){return e+t},o=i[0].level;for(var u=0;u<i.length;++u){var a=i[u],f=a.level%2==o;if(a.from<t&&a.to>t||f&&(a.from==t||a.to==t))break}var l=s(t,a.level%2?-n:n);while(l!=null)if(a.level%2==o){if(!(l<a.from||l>a.to))break;a=i[u+=n],l=a&&(n>0==a.level%2?s(a.to,-1):s(a.from,1))}else if(l==wr(a))a=i[--u],l=a&&Er(a);else{if(l!=Er(a))break;a=i[++u],l=a&&wr(a)}return l<0||l>e.text.length?null:l}function kr(e,t,n,r){var i=t+n;if(r)while(i>0&&or.test(e.text.charAt(i)))i+=n;return i<0||i>e.text.length?null:i}var e=/gecko\/\d{7}/i.test(navigator.userAgent),t=/MSIE \d/.test(navigator.userAgent),n=/MSIE [1-7]\b/.test(navigator.userAgent),r=/MSIE [1-8]\b/.test(navigator.userAgent),i=/WebKit\//.test(navigator.userAgent),s=/Chrome\//.test(navigator.userAgent),o=/Opera\//.test(navigator.userAgent),u=/Apple Computer/.test(navigator.vendor),a=/KHTML\//.test(navigator.userAgent),f=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent),l=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),c=l||/Mac/.test(navigator.platform),h=/Win/.test(navigator.platform),J,lt,ct,gt,wt=null,Nt;p.prototype={getValue:function(e){var t=[],n=this.view.doc;return n.iter(0,n.size,function(e){t.push(e.text)}),t.join(e||"\n")},setValue:Z(null,function(e){var t=this.view.doc,n={line:0,ch:0},r=Cn(t,t.size-1).text.length;kt(this,n,{line:t.size-1,ch:r},mr(e),n,n),this.curOp.updateInput=!0}),getSelection:function(e){return this.getRange(this.view.sel.from,this.view.sel.to,e)},replaceSelection:Z(null,function(e,t){var n=this.view.sel;Dt(this,mr(e),n.from,n.to,function(e){return t=="end"?{from:e,to:e}:t=="start"?{from:n.from,to:n.from}:{from:n.from,to:e}})}),focus:function(){window.focus(),ot(this),xt(this),rt(this)},setOption:function(e,t){var n=this.options;if(n[e]==t&&e!="mode")return;n[e]=t,e=="mode"||e=="indentUnit"?v(this):e=="readOnly"&&t=="nocursor"?(Tt(this),this.display.input.blur()):e=="readOnly"&&!t?st(this,!0):e=="theme"?y(this):e=="lineWrapping"?Z(this,m)(this):e=="tabSize"?(this.view.doc.tabSize=t,O(this,!0)):e=="keyMap"?g(this):(e=="gutters"||e=="lineNumbers")&&S(this.options),(e=="lineNumbers"||e=="gutters"||e=="firstLineNumber"||e=="theme"||e=="lineNumberFormatter")&&b(this),nn.hasOwnProperty(e)&&nn[e](this,t)},getOption:function(e){return this.options[e]},getMode:function(){return this.view.doc.mode},undo:Z(null,function(){var e=this.view.doc.history;Lt(this,e.done,e.undone)}),redo:Z(null,function(){var e=this.view.doc.history;Lt(this,e.undone,e.done)}),indentLine:Z(null,function(e,t){typeof t!="string"&&(t==null?t=this.options.smartIndent?"smart":"prev":t=t?"add":"subtract"),It(this.view.doc,e)&&$t(this,e,t)}),indentSelection:Z(null,function(e){var t=this.view.sel;if(Pt(t.from,t.to))return $t(this,t.from.line,e);var n=t.to.line-(t.to.ch?0:1);for(var r=t.from.line;r<=n;++r)$t(this,r,e)}),historySize:function(){var e=this.view.doc.history;return{undo:e.done.length,redo:e.undone.length}},clearHistory:function(){this.view.doc.history=new Dn},getHistory:function(){function t(e){for(var t=0,n=[],r;t<e.length;++t){n.push(r=[]);for(var i=0,s=e[t];i<s.length;++i){var o=[],u=s[i];r.push({start:u.start,added:u.added,old:o});for(var a=0;a<u.old.length;++a)o.push(gn(u.old[a]))}}return n}var e=this.view.doc.history;return{done:t(e.done),undone:t(e.undone)}},setHistory:function(e){var t=this.view.doc.history=new Dn;t.done=e.done,t.undone=e.undone},getTokenAt:function(e){var t=this.view.doc;return e=Ft(t,e),Cn(t,e.line).getTokenAt(t.mode,q(t,e.line),this.options.tabSize,e.ch)},getStateAfter:function(e){var t=this.view.doc;return e=jt(t,e==null?t.size-1:e),q(t,e+1)},cursorCoords:function(e,t){var n,r=this.view.sel;return e==null&&(e=r.inverted),typeof e=="object"?n=Ft(this.view.doc,e):n=e?r.from:r.to,V(this,n,t||"page")},charCoords:function(e,t){return X(this,Ft(this.view.doc,e),t||"page")},coordsChar:function(e){var t=this.display.lineSpace.getBoundingClientRect();return $(this,e.left-t.left,e.top-t.top)},markText:Z(null,function(e,t,n,r){var i=this.view.doc;e=Ft(i,e),t=Ft(i,t);var s=new hn(this,"range",n);if(r)for(var o in r)r.hasOwnProperty(o)&&(s[o]=r[o]);var u=e.line;return i.iter(u,t.line+1,function(n){var r={from:u==e.line?e.ch:null,to:u==t.line?t.ch:null,marker:s};(n.markedSpans||(n.markedSpans=[])).push(r),s.lines.push(n),++u}),et(this,e.line,t.line+1),s}),setBookmark:function(e){var t=this.view.doc;e=Ft(t,e);var n=new hn(this,"bookmark"),r=Cn(t,e.line),i={from:e.ch,to:e.ch,marker:n};return(r.markedSpans||(r.markedSpans=[])).push(i),n.lines.push(r),n},findMarksAt:function(e){var t=this.view.doc;e=Ft(t,e);var n=[],r=Cn(t,e.line).markedSpans;if(r)for(var i=0;i<r.length;++i){var s=r[i];(s.from==null||s.from<=e.ch)&&(s.to==null||s.to>=e.ch)&&n.push(s.marker)}return n},setGutterMarker:Z(null,function(e,t,n){return Jt(this,e,function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&sr(r)&&(e.gutterMarkers=null),!0})}),clearGutter:Z(null,function(e){var t=0,n=this,r=n.view.doc;r.iter(0,r.size,function(r){r.gutterMarkers&&r.gutterMarkers[e]&&(r.gutterMarkers[e]=null,et(n,t,t+1),sr(r.gutterMarkers)&&(r.gutterMarkers=null)),++t})}),setLineClass:Z(null,function(e,t,n){return Jt(this,e,function(e){if(e.className!=t||e.bgClassName!=n)return e.className=t,e.bgClassName=n,!0})}),addLineWidget:Z(null,function(t,n,r){var i=r||{};return i.node=n,i.noHScroll&&(this.display.alignWidgets=!0),Jt(this,t,function(e){return(e.widgets||(e.widgets=[])).push(i),i.line=e,!0}),i}),removeLineWidget:Z(null,function(e){var t=e.line.widgets,n=Ln(e.line);if(n==null)return;for(var r=0;r<t.length;++r)t[r]==e&&t.splice(r--,1);et(this,n,n+1)}),foldLines:Z(null,function(e,t,n){typeof e!="number"&&(e=Ln(e)),typeof t!="number"&&(t=Ln(t));if(e>t)return;var r=[],i={lines:r,unfoldOnEnter:n},s=this,o=s.view,u=o.doc;u.iter(e,t,function(e){r.push(e),!e.hidden&&e.text.length==s.view.maxLine.text.length&&(s.curOp.updateMaxLine=!0),e.hidden={handle:i,prev:e.hidden},kn(e,0)});var a=o.sel,f=a.from,l=a.to;return f.line>=e&&f.line<t&&(f=zt(u,{line:f.line,ch:0},f.line,0)),l.line>=e&&l.line<t&&(l=zt(u,{line:l.line,ch:0},l.line,0)),(f!=a.from||l!=a.to)&&Ut(this,f,l),et(s,e,t),i}),unfoldLines:Z(null,function(e){var t,n;for(var r=0;r<e.lines.length;++r){var i=e.lines[r],s=i.hidden;if(!i.parent)continue;if(s&&s.handle==e)i.hidden=i.hidden.prev;else for(var o=s;o;o=o.prev)o.prev&&o.prev.handle==e&&(o.prev=o.prev.prev);if(s&&!i.hidden){var u=Ln(e);t=Math.min(t,u),n=Math.max(n,u),kn(i,K(this.display)),i.text.length>this.view.maxLine.text.length&&(this.view.maxLine=i,this.view.maxLineChanged=!0)}}t!=null&&(et(this,t,n+1),Xn(this,e,"unfold"))}),lineInfo:function(e){if(typeof e=="number"){if(!It(this.view.doc,e))return null;var t=e;e=Cn(this.view.doc,e);if(!e)return null}else{var t=Ln(e);if(t==null)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,lineClass:e.className,bgClass:e.bgClassName,widgets:e.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(e,t,n,r,i){var s=this.display;e=V(this,Ft(this.view.doc,e));var o=e.top,u=e.left;t.style.position="absolute",s.sizer.appendChild(t);if(r=="over")o=e.top;else if(r=="near"){var a=Math.max(s.wrapper.clientHeight,this.view.doc.height),f=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);e.bottom+t.offsetHeight>a&&e.top>t.offsetHeight&&(o=e.top-t.offsetHeight),u+t.offsetWidth>f&&(u=f-t.offsetWidth)}t.style.top=o+R(s)+"px",t.style.left=t.style.right="",i=="right"?(u=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):(i=="left"?u=0:i=="middle"&&(u=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&Xt(s,u,o,u+t.offsetWidth,o+t.offsetHeight)},lineCount:function(){return this.view.doc.size},clipPos:function(e){return Ft(this.view.doc,e)},getCursor:function(e){var t=this.view.sel;return e==null&&(e=t.inverted),Bt(e?t.from:t.to)},somethingSelected:function(){return!Pt(this.view.sel.from,this.view.sel.to)},setCursor:Z(null,function(e,t,n){var r=typeof e=="number"?{line:e,ch:t||0}:e;(n?Rt:Ut)(this,r,r)}),setSelection:Z(null,function(e,t,n){var r=this.view.doc;(n?Rt:Ut)(this,Ft(r,e),Ft(r,t||e))}),getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){var t=this.view.doc;if(It(t,e))return Cn(t,e)},getLineNumber:function(e){return Ln(e)},setLine:Z(null,function(e,t){It(this.view.doc,e)&&_t(this,t,{line:e,ch:0},{line:e,ch:Cn(this.view.doc,e).text.length})}),removeLine:Z(null,function(e){It(this.view.doc,e)&&_t(this,"",{line:e,ch:0},Ft(this.view.doc,{line:e+1,ch:0}))}),replaceRange:Z(null,function(e,t,n){var r=this.view.doc;return t=Ft(r,t),n=n?Ft(r,n):t,_t(this,e,t,n)}),getRange:function(e,t,n){var r=this.view.doc;e=Ft(r,e),t=Ft(r,t);var i=e.line,s=t.line;if(i==s)return Cn(r,i).text.slice(e.ch,t.ch);var o=[Cn(r,i).text.slice(e.ch)];return r.iter(i+1,s,function(e){o.push(e.text)}),o.push(Cn(r,s).text.slice(0,t.ch)),o.join(n||"\n")},triggerOnKeyDown:Z(null,Et),execCommand:function(e){return on[e](this)},moveH:Z(null,function(e,t){var n=this.view.sel,r=e<0?n.from:n.to;if(n.shift||Pt(n.from,n.to))r=Kt(this,e,t,!0);Rt(this,r,r)}),deleteH:Z(null,function(e,t){var n=this.view.sel;Pt(n.from,n.to)?_t(this,"",n.from,Kt(this,e,t,!1)):_t(this,"",n.from,n.to),this.curOp.userSelChange=!0}),moveV:Z(null,function(e,t){var n=this.view,r=n.doc,i=this.display,s=0,o=P(n),u=V(this,o,"div"),a=u.left,f;n.goalColumn!=null&&(a=n.goalColumn);if(t=="page"){var l=Math.min(i.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);f=u.top+e*l}else t=="line"&&(f=e>0?u.bottom+3:u.top-3);var c=$(this,a,f),h;e>0&&c.line==o.line&&o.line<r.size-1&&Cn(r,o.line).widgets&&Math.abs(V(this,c,"div").top-u.top)<2?c=$(this,a,V(this,{line:o.line+1,ch:0},"div").top+3):e<0&&o.line>0&&(h=Cn(r,c.line)).widgets&&c.ch==h.text.length&&(c=$(this,a,V(this,{line:c.line,ch:h.text.length},"div").bottom-3)),t=="page"&&(i.scrollbarV.scrollTop+=X(this,c,"div").top-u.top),Rt(this,c,c),n.goalColumn=a}),toggleOverwrite:function(){(this.view.overwrite=!this.view.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},posFromIndex:function(e){var t=0,n,r=this.view.doc;return r.iter(0,r.size,function(r){var i=r.text.length+1;if(i>e)return n=e,!0;e-=i,++t}),Ft(r,{line:t,ch:n})},indexFromPos:function(e){if(e.line<0||e.ch<0)return 0;var t=e.ch;return this.view.doc.iter(0,e.line,function(e){t+=e.text.length+1}),t},scrollTo:function(e,t){e!=null&&(this.display.scrollbarH.scrollLeft=this.display.scroller.scrollLeft=e),t!=null&&(this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=t),O(this,[])},getScrollInfo:function(){var e=this.display.scroller,t=$n;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},setSize:function(e,t){function n(e){return e=String(e),/^\d+$/.test(e)?e+"px":e}e!=null&&(this.display.wrapper.style.width=n(e)),t!=null&&(this.display.wrapper.style.height=n(t)),this.refresh()},on:function(e,t){Un(this,e,t)},off:function(e,t){zn(this,e,t)},operation:function(e){return Z(this,e)()},compoundChange:function(e){return tt(this,e)},refresh:function(){O(this,!0,this.view.scrollTop),this.display.scrollbarV.scrollHeight>this.view.scrollTop&&(this.display.scrollbarV.scrollTop=this.view.scrollTop)},getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var Yt=p.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,autoClearEmptyLines:!1,onKeyEvent:null,onDragEvent:null,lineWrapping:!1,lineNumbers:!1,gutters:[],fixedGutter:!1,firstLineNumber:1,readOnly:!1,dragDrop:!0,cursorBlinkRate:530,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null,lineNumberFormatter:function(e){return e}},Zt=p.modes={},en=p.mimeModes={};p.defineMode=function(e,t){!p.defaults.mode&&e!="null"&&(p.defaults.mode=e);if(arguments.length>2){t.dependencies=[];for(var n=2;n<arguments.length;++n)t.dependencies.push(arguments[n])}Zt[e]=t},p.defineMIME=function(e,t){en[e]=t},p.resolveMode=function(e){if(typeof e=="string"&&en.hasOwnProperty(e))e=en[e];else if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return p.resolveMode("application/xml");return typeof e=="string"?{name:e}:e||{name:"null"}},p.getMode=function(e,t){var t=p.resolveMode(t),n=Zt[t.name];if(!n)return p.getMode(e,"text/plain");var r=n(e,t);if(tn.hasOwnProperty(t.name)){var i=tn[t.name];for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r.name=t.name,r},p.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),p.defineMIME("text/plain","null");var tn=p.modeExtensions={};p.extendMode=function(e,t){var n=tn.hasOwnProperty(e)?tn[e]:tn[e]={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},p.defineExtension=function(e,t){p.prototype[e]=t};var nn=p.optionHandlers={};p.defineOption=function(e,t,n){p.defaults[e]=t,nn[e]=n},p.copyState=rn,p.startState=sn,p.innerMode=function(e,t){while(e.innerMode){var n=e.innerMode(t);t=n.state,e=n.mode}return n||{mode:e,state:t}};var on=p.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),r=!Pt(t,n);!r&&e.getLine(t.line).length==t.ch?e.replaceRange("",t,{line:t.line+1,ch:0}):e.replaceRange("",t,r?n:{line:t.line})},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t})},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.setCursor(0,0,!0)},goDocEnd:function(e){e.setSelection({line:e.lineCount()-1},null,!0)},goLineStart:function(e){var t=e.getCursor().line;e.setCursor(t,Tr(e.getLineHandle(t)),!0)},goLineStartSmart:function(e){var t=e.getCursor(),n=e.getLineHandle(t.line),r=Mn(n);if(!r||r[0].level==0){var i=Math.max(0,n.text.search(/\S/));e.setCursor(t.line,t.ch<=i&&t.ch?0:i,!0)}else e.setCursor(t.line,Tr(n),!0)},goLineEnd:function(e){var t=e.getCursor().line;e.setCursor(t,Nr(e.getLineHandle(t)),!0)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("	","end")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){e.replaceSelection("\n","end"),e.indentLine(e.getCursor().line)},toggleOverwrite:function(e){e.toggleOverwrite()}},un=p.keyMap={};un.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},un.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordBefore","Ctrl-Delete":"delWordAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},un.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordBefore","Ctrl-Alt-Backspace":"delWordAfter","Alt-Delete":"delWordAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},un["default"]=c?un.macDefault:un.pcDefault,un.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},p.fromTextArea=function(e,t){function i(){e.value=o.getValue()}t||(t={}),t.value=e.value,!t.tabindex&&e.tabindex&&(t.tabindex=e.tabindex);if(t.autofocus==null){var n=document.body;try{n=document.activeElement}catch(r){}t.autofocus=n==e||e.getAttribute("autofocus")!=null&&n==document.body}if(e.form){Un(e.form,"submit",i);if(typeof e.form.submit=="function"){var s=e.form.submit;e.form.submit=function u(){i(),e.form.submit=s,e.form.submit(),e.form.submit=u}}}e.style.display="none";var o=p(function(t){e.parentNode.insertBefore(t,e.nextSibling)},t);return o.save=i,o.getTextArea=function(){return e},o.toTextArea=function(){i(),e.parentNode.removeChild(o.getWrapperElement()),e.style.display="",e.form&&(zn(e.form,"submit",i),typeof e.form.submit=="function"&&(e.form.submit=s))},o},cn.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if(typeof e=="string")var n=t==e;else var n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){var t=this.pos;while(this.eat(e));return this.pos>t},eatSpace:function(){var e=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return Qn(this.string,this.start,this.tabSize)},indentation:function(){return Qn(this.string,null,this.tabSize)},match:function(e,t,n){if(typeof e!="string"){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&t!==!1&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e};if(r(this.string).indexOf(r(e),this.pos)==this.pos)return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},p.StringStream=cn,hn.prototype.clear=function(){G(this.cm);var e=Infinity,t=-Infinity;for(var n=0;n<this.lines.length;++n){var r=this.lines[n],i=pn(r.markedSpans,this,!0);if(i.from!=null||i.to!=null){var s=Ln(r);e=Math.min(e,s),t=Math.max(t,s)}}e!=Infinity&&et(this.cm,e,t+1),this.lines.length=0,Y(this.cm)},hn.prototype.find=function(){var e,t;for(var n=0;n<this.lines.length;++n){var r=this.lines[n],i=pn(r.markedSpans,this);if(i.from!=null||i.to!=null){var s=Ln(r);i.from!=null&&(e={line:s,ch:i.from}),i.to!=null&&(t={line:s,ch:i.to})}}return this.type=="bookmark"?e:e&&{from:e,to:t}},Sn.prototype={update:function(e,t,n){this.text=e,this.stateAfter=this.styles=null,wn(this),En(this,t),Xn(n,this,"change")},highlight:function(e,t,n){var r=new cn(this.text,n),i=this.styles||(this.styles=[]),s=i.length=0;this.text==""&&e.blankLine&&e.blankLine(t);while(!r.eol()){var o=e.token(r,t),u=r.current();r.start=r.pos,s&&i[s-1]==o?i[s-2]+=u:u&&(i[s++]=u,i[s++]=o);if(r.pos>5e3){i[s++]=this.text.slice(r.pos),i[s++]=null;break}}},process:function(e,t,n){var r=new cn(this.text,n);this.text==""&&e.blankLine&&e.blankLine(t);while(!r.eol()&&r.pos<=5e3)e.token(r,t),r.start=r.pos},getTokenAt:function(e,t,n,r){var i=this.text,s=new cn(i,n);while(s.pos<r&&!s.eol()){s.start=s.pos;var o=e.token(s,t)}return{start:s.start,end:s.pos,string:s.current(),className:o||null,state:t}},indentation:function(e){return Qn(this.text,null,e)},getContent:function(e,n,r){function a(n,r){if(!n)return;i&&t&&n.charAt(0)==" "&&(n="\u00a0"+n.slice(1)),i=!1;if(!o.test(n)){s+=n.length;var a=document.createTextNode(n)}else{var a=document.createDocumentFragment(),f=0;for(;;){o.lastIndex=f;var l=o.exec(n),c=l?l.index-f:n.length-f;c&&(a.appendChild(document.createTextNode(n.slice(f,f+c))),s+=c);if(!l)break;f+=c+1;if(l[0]=="	"){var h=e-s%e;a.appendChild(ur("span",Yn(h),"cm-tab")),s+=h}else{var p=ur("span","\u2022","cm-invalidchar");p.title="\\u"+l[0].charCodeAt(0).toString(16),a.appendChild(p),s+=1}}}return r!=null?u.appendChild(ur("span",[a],r)):u.appendChild(a)}function v(e){return e?"cm-"+e.replace(/ +/g," cm-"):null}var i=!0,s=0,o=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g,u=ur("pre"),f=a;if(n!=null){var l=0;f=function(e,t){var i=e.length;if(n>=l&&n<l+i){var s=n-l;n>l&&(a(e.slice(0,s),t),r&&pr.test(e.slice(s-1,s+1))&&u.appendChild(ur("wbr")));if(s+1==i)u.anchor=a(e.slice(s),t||""),n--;else{var o=s+1;while(or.test(e.charAt(o)))++o;u.anchor=a(e.slice(s,o),t||""),r&&pr.test(e.slice(s,o+1))&&u.appendChild(ur("wbr")),a(e.slice(o),t)}l+=i}else l+=i,a(e,t)}}var c=this.styles,h=this.text,p=this.markedSpans,d=h.length;if(!h)f("\u00a0");else if(!p||!p.length)for(var m=0,g=0;g<d;m+=2){var y=c[m],b=c[m+1],w=y.length;g+w>d&&(y=y.slice(0,d-g)),g+=w,f(y,v(b))}else{p.sort(function(e,t){return e.from-t.from});var E=0,m=0,S="",b,x=0,T=p[0].from||0,N=[],C=0,k=function(){var e;while(C<p.length&&((e=p[C]).from==E||e.from==null))e.marker.type=="range"&&N.push(e),++C;T=C<p.length?p[C].from:Infinity;for(var t=0;t<N.length;++t){var n=N[t].to;n==null&&(n=Infinity),n==E?N.splice(t--,1):T=Math.min(n,T)}},L=0;while(E<d){T==E&&k();var A=Math.min(d,T);for(;;){if(S){var O=E+S.length,M=b;for(var _=0;_<N.length;++_){var D=N[_];M=(M?M+" ":"")+D.marker.style,D.marker.endStyle&&D.to===Math.min(O,A)&&(M+=" "+D.marker.endStyle),D.marker.startStyle&&D.from===E&&(M+=" "+D.marker.startStyle)}f(O>A?S.slice(0,A-E):S,M);if(O>=A){S=S.slice(A-E),E=A;break}E=O}S=c[m++],b=v(c[m++])}}}return u},cleanUp:function(){this.parent=null,wn(this)}},xn.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,n){for(var r=e,i=e+t;r<i;++r){var s=this.lines[r];this.height-=s.height,s.cleanUp(),Xn(n,s,"delete")}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0,i=t.length;r<i;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},Tn.prototype={chunkSize:function(){return this.size},remove:function(e,t,n){this.size-=t;for(var r=0;r<this.children.length;++r){var i=this.children[r],s=i.chunkSize();if(e<s){var o=Math.min(t,s-e),u=i.height;i.remove(e,o,n),this.height-=u-i.height,s==o&&(this.children.splice(r--,1),i.parent=null);if((t-=o)==0)break;e=0}else e-=s}if(this.size-t<25){var a=[];this.collapse(a),this.children=[new xn(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0,n=this.children.length;t<n;++t)this.children[t].collapse(e)},insert:function(e,t){var n=0;for(var r=0,i=t.length;r<i;++r)n+=t[r].height;this.insertHeight(e,t,n)},insertHeight:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<=o){s.insertHeight(e,t,n);if(s.lines&&s.lines.length>50){while(s.lines.length>50){var u=s.lines.splice(s.lines.length-25,25),a=new xn(u);s.height-=a.height,this.children.splice(r+1,0,a),a.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(this.children.length<=10)return;var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new Tn(t);if(!e.parent){var r=new Tn(e.children);r.parent=e,e.children=[r,n],e=r}else{e.size-=n.size,e.height-=n.height;var i=nr(e.parent.children,e);e.parent.children.splice(i+1,0,n)}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()},iter:function(e,t,n){this.iterN(e,t-e,n)},iterN:function(e,t,n){for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<o){var u=Math.min(t,o-e);if(s.iterN(e,u,n))return!0;if((t-=u)==0)break;e=0}else e-=o}}},Dn.prototype={addChange:function(e,t,n){this.undone.length=0;var r=+(new Date),i=Zn(this.done),s=i&&Zn(i),o=r-this.time;if(this.compound&&i&&!this.closed)i.push({start:e,added:t,old:n});else if(o>400||!s||this.closed||s.start>e+n.length||s.start+s.added<e)this.done.push([{start:e,added:t,old:n}]),this.closed=!1;else{var u=Math.max(0,s.start-e),a=Math.max(0,e+n.length-(s.start+s.added));for(var f=u;f>0;--f)s.old.unshift(n[f-1]);for(var f=a;f>0;--f)s.old.push(n[n.length-f]);u&&(s.start=e),s.added+=t-(n.length-u-a)}this.time=r},startCompound:function(){this.compound++||(this.closed=!0)},endCompound:function(){--this.compound||(this.closed=!0)}},p.e_stop=Fn,p.e_preventDefault=Bn,p.e_stopPropagation=jn,p.on=Un,p.off=zn,p.signal=Wn;var $n=30,Jn=p.Pass={toString:function(){return"CodeMirror.Pass"}};Kn.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}};var Gn=[""],or=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F]/,cr=function(){if(r)return!1;var e=ur("div");return"draggable"in e||"dragDrop"in e}(),hr=function(){var e=ur("textarea");return e.value="foo\nbar",e.value.indexOf("\r")>-1?"\r\n":"\n"}(),pr=/^$/;e?pr=/$'/:u?pr=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:s&&(pr=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var dr,mr="\n\nb".split(/\n/).length!=3?function(e){var t=0,n=[],r=e.length;while(t<=r){var i=e.indexOf("\n",t);i==-1&&(i=e.length);var s=e.slice(t,e.charAt(i-1)=="\r"?i-1:i),o=s.indexOf("\r");o!=-1?(n.push(s.slice(0,o)),t+=o+1):(n.push(s),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)};p.splitLines=mr;var gr=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},yr={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};p.keyNames=yr,function(){for(var e=0;e<10;e++)yr[e+48]=String(e);for(var e=65;e<=90;e++)yr[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)yr[e+111]=yr[e+63235]="F"+e}();var Lr=function(){function n(n){var r="L";return n<=255?e.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1791?t.charAt(n-1536):1792<=n&&n<=2220?"r":"L"}var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",t="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,s=/[LRr]/,o=/[Lb1n]/,u=/[1n]/;return function(t){if(!r.test(t))return!1;var a=t.length,f=new Array(a),l=null;for(var c=0;c<a;++c){var h=f[c]=n(t.charCodeAt(c));if(l==null)if(h=="L")l="L";else if(h=="R"||h=="r")l="R"}l==null&&(l="L");for(var c=0,p=l;c<a;++c){var h=f[c];h=="m"?f[c]=p:p=h}for(var c=0,d=l;c<a;++c){var h=f[c];h=="1"&&d=="r"?f[c]="n":s.test(h)&&(d=h,h=="r"&&(f[c]="R"))}for(var c=1,p=f[0];c<a-1;++c){var h=f[c];h=="+"&&p=="1"&&f[c+1]=="1"?f[c]="1":h==","&&p==f[c+1]&&(p=="1"||p=="n")&&(f[c]=p),p=h}for(var c=0;c<a;++c){var h=f[c];if(h==",")f[c]="N";else if(h=="%"){for(var v=c+1;v<a&&f[v]=="%";++v);var m=c&&f[c-1]=="!"||v<a-1&&f[v]=="1"?"1":"N";for(var g=c;g<v;++g)f[g]=m;c=v-1}}for(var c=0,d=l;c<a;++c){var h=f[c];d=="L"&&h=="1"?f[c]="L":s.test(h)&&(d=h)}for(var c=0;c<a;++c)if(i.test(f[c])){for(var v=c+1;v<a&&i.test(f[v]);++v);var y=(c?f[c-1]:l)=="L",b=(v<a-1?f[v]:l)=="L",m=y||b?"L":"R";for(var g=c;g<v;++g)f[g]=m;c=v-1}var w=[],E;for(var c=0;c<a;)if(o.test(f[c])){var S=c;for(++c;c<a&&o.test(f[c]);++c);w.push({from:S,to:c,level:0})}else{var x=c,T=w.length;for(++c;c<a&&f[c]!="L";++c);for(var g=x;g<c;)if(u.test(f[g])){x<g&&w.splice(T,0,{from:x,to:g,level:1});var N=g;for(++g;g<c&&u.test(f[g]);++g);w.splice(T,0,{from:N,to:g,level:2}),x=g}else++g;x<c&&w.splice(T,0,{from:x,to:c,level:1})}return w[0].level==1&&(E=t.match(/^\s+/))&&(w[0].from=E[0].length,w.unshift({from:0,to:E[0].length,level:0})),Zn(w).level==1&&(E=t.match(/\s+$/))&&(Zn(w).to-=E[0].length,w.push({from:a-E[0].length,to:a,level:0})),w[0].level!=Zn(w).level&&w.push({from:a,to:a,level:w[0].level}),w}}();return p.version="3.0 B",p}(),CodeMirror.defineMode("clike",function(e,t){function c(e,t){var n=e.next();if(u[n]){var a=u[n](e,t);if(a!==!1)return a}if(n=='"'||n=="'")return t.tokenize=h(n),t.tokenize(e,t);if(/[\[\]{}\(\),;\:\.]/.test(n))return l=n,null;if(/\d/.test(n))return e.eatWhile(/[\w\.]/),"number";if(n=="/"){if(e.eat("*"))return t.tokenize=p,p(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(f.test(n))return e.eatWhile(f),"operator";e.eatWhile(/[\w\$_]/);var c=e.current();return r.propertyIsEnumerable(c)?(s.propertyIsEnumerable(c)&&(l="newstatement"),"keyword"):i.propertyIsEnumerable(c)?(s.propertyIsEnumerable(c)&&(l="newstatement"),"builtin"):o.propertyIsEnumerable(c)?"atom":"variable"}function h(e){return function(t,n){var r=!1,i,s=!1;while((i=t.next())!=null){if(i==e&&!r){s=!0;break}r=!r&&i=="\\"}if(s||!r&&!a)n.tokenize=null;return"string"}}function p(e,t){var n=!1,r;while(r=e.next()){if(r=="/"&&n){t.tokenize=null;break}n=r=="*"}return"comment"}function d(e,t,n,r,i){this.indented=e,this.column=t,this.type=n,this.align=r,this.prev=i}function v(e,t,n){return e.context=new d(e.indented,t,n,null,e.context)}function m(e){var t=e.context.type;if(t==")"||t=="]"||t=="}")e.indented=e.context.indented;return e.context=e.context.prev}var n=e.indentUnit,r=t.keywords||{},i=t.builtin||{},s=t.blockKeywords||{},o=t.atoms||{},u=t.hooks||{},a=t.multiLineStrings,f=/[+\-*&%=<>!?|\/]/,l;return{startState:function(e){return{tokenize:null,context:new d((e||0)-n,0,"top",!1),indented:0,startOfLine:!0}},token:function(e,t){var n=t.context;e.sol()&&(n.align==null&&(n.align=!1),t.indented=e.indentation(),t.startOfLine=!0);if(e.eatSpace())return null;l=null;var r=(t.tokenize||c)(e,t);if(r=="comment"||r=="meta")return r;n.align==null&&(n.align=!0);if(l!=";"&&l!=":"||n.type!="statement")if(l=="{")v(t,e.column(),"}");else if(l=="[")v(t,e.column(),"]");else if(l=="(")v(t,e.column(),")");else if(l=="}"){while(n.type=="statement")n=m(t);n.type=="}"&&(n=m(t));while(n.type=="statement")n=m(t)}else l==n.type?m(t):(n.type=="}"||n.type=="top"||n.type=="statement"&&l=="newstatement")&&v(t,e.column(),"statement");else m(t);return t.startOfLine=!1,r},indent:function(e,t){if(e.tokenize!=c&&e.tokenize!=null)return 0;var r=e.context,i=t&&t.charAt(0);r.type=="statement"&&i=="}"&&(r=r.prev);var s=i==r.type;return r.type=="statement"?r.indented+(i=="{"?0:n):r.align?r.column+(s?0:1):r.indented+(s?0:n)},electricChars:"{}"}}),function(){function e(e){var t={},n=e.split(" ");for(var r=0;r<n.length;++r)t[n[r]]=!0;return t}function n(e,t){return t.startOfLine?(e.skipToEnd(),"meta"):!1}function r(e,t){var n;while((n=e.next())!=null)if(n=='"'&&!e.eat('"')){t.tokenize=null;break}return"string"}function i(e,t){for(var n=0;n<e.length;++n)CodeMirror.defineMIME(e[n],t)}var t="auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile";i(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:e(t),blockKeywords:e("case do else for if switch while struct"),atoms:e("null"),hooks:{"#":n}}),i(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:e(t+" asm dynamic_cast namespace reinterpret_cast try bool explicit new "+"static_cast typeid catch operator template typename class friend private "+"this using const_cast inline public throw virtual delete mutable protected "+"wchar_t"),blockKeywords:e("catch class do else finally for if struct switch try while"),atoms:e("true false null"),hooks:{"#":n}}),CodeMirror.defineMIME("text/x-java",{name:"clike",keywords:e("abstract assert boolean break byte case catch char class const continue default do double else enum extends final finally float for goto if implements import instanceof int interface long native new package private protected public return short static strictfp super switch synchronized this throw throws transient try void volatile while"),blockKeywords:e("catch class do else finally for if switch try while"),atoms:e("true false null"),hooks:{"@":function(e,t){return e.eatWhile(/[\w\$_]/),"meta"}}}),CodeMirror.defineMIME("text/x-csharp",{name:"clike",keywords:e("abstract as base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),blockKeywords:e("catch class do else finally for foreach if struct switch try while"),builtin:e("Boolean Byte Char DateTime DateTimeOffset Decimal Double Guid Int16 Int32 Int64 Object SByte Single String TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),atoms:e("true false null"),hooks:{"@":function(e,t){return e.eat('"')?(t.tokenize=r,r(e,t)):(e.eatWhile(/[\w\$_]/),"meta")}}}),CodeMirror.defineMIME("text/x-scala",{name:"clike",keywords:e("abstract case catch class def do else extends false final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try trye type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector :: #:: Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),blockKeywords:e("catch class do else finally for forSome if match switch try while"),atoms:e("true false null"),hooks:{"@":function(e,t){return e.eatWhile(/[\w\$_]/),"meta"}}})}(),function(){function e(){this.posFrom=this.posTo=this.query=null,this.marked=[]}function t(t){return t._searchState||(t._searchState=new e)}function n(e,t,n){return e.getSearchCursor(t,n,typeof t=="string"&&t==t.toLowerCase())}function r(e,t,n,r){e.openDialog?e.openDialog(t,r):r(prompt(n,""))}function i(e,t,n,r){e.openConfirm?e.openConfirm(t,r):confirm(n)&&r[0]()}function s(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);return t?new RegExp(t[1],t[2].indexOf("i")==-1?"":"i"):e}function u(e,i){var u=t(e);if(u.query)return a(e,i);r(e,o,"Search for:",function(t){e.operation(function(){if(!t||u.query)return;u.query=s(t);if(e.lineCount()<2e3)for(var r=n(e,u.query);r.findNext();)u.marked.push(e.markText(r.from(),r.to(),"CodeMirror-searching"));u.posFrom=u.posTo=e.getCursor(),a(e,i)})})}function a(e,r){e.operation(function(){var i=t(e),s=n(e,i.query,r?i.posFrom:i.posTo);if(!s.find(r)){s=n(e,i.query,r?{line:e.lineCount()-1}:{line:0,ch:0});if(!s.find(r))return}e.setSelection(s.from(),s.to()),i.posFrom=s.from(),i.posTo=s.to()})}function f(e){e.operation(function(){var n=t(e);if(!n.query)return;n.query=null;for(var r=0;r<n.marked.length;++r)n.marked[r].clear();n.marked.length=0})}function p(e,t){r(e,l,"Replace:",function(o){if(!o)return;o=s(o),r(e,c,"Replace with:",function(r){if(t)e.compoundChange(function(){e.operation(function(){for(var t=n(e,o);t.findNext();)if(typeof o!="string"){var i=e.getRange(t.from(),t.to()).match(o);t.replace(r.replace(/\$(\d)/,function(e,t){return i[t]}))}else t.replace(r)})});else{f(e);var s=n(e,o,e.getCursor());function u(){var t=s.from(),r;if(!(r=s.findNext())){s=n(e,o);if(!(r=s.findNext())||t&&s.from().line==t.line&&s.from().ch==t.ch)return}e.setSelection(s.from(),s.to()),i(e,h,"Replace?",[function(){a(r)},u])}function a(e){s.replace(typeof o=="string"?r:r.replace(/\$(\d)/,function(t,n){return e[n]})),u()}u()}})})}var o='Search: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>',l='Replace: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>',c='With: <input type="text" style="width: 10em"/>',h="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";CodeMirror.commands.find=function(e){f(e),u(e)},CodeMirror.commands.findNext=u,CodeMirror.commands.findPrev=function(e){u(e,!0)},CodeMirror.commands.clearSearch=f,CodeMirror.commands.replace=p,CodeMirror.commands.replaceAll=function(e){p(e,!0)}}(),function(){function e(e,t,n,r){this.atOccurrence=!1,this.cm=e,r==null&&typeof t=="string"&&(r=!1),n=n?e.clipPos(n):{line:0,ch:0},this.pos={from:n,to:n};if(typeof t!="string")t.global||(t=new RegExp(t.source,t.ignoreCase?"ig":"g")),this.matches=function(n,r){if(n){t.lastIndex=0;var i=e.getLine(r.line).slice(0,r.ch),s=t.exec(i),o=0;while(s){o+=s.index,i=i.slice(s.index),t.lastIndex=0;var u=t.exec(i);if(!u)break;s=u,o++}}else{t.lastIndex=r.ch;var i=e.getLine(r.line),s=t.exec(i),o=s&&s.index}if(s)return{from:{line:r.line,ch:o},to:{line:r.line,ch:o+s[0].length},match:s}};else{r&&(t=t.toLowerCase());var i=r?function(e){return e.toLowerCase()}:function(e){return e},s=t.split("\n");s.length==1?this.matches=function(n,r){var s=i(e.getLine(r.line)),o=t.length,u;if(n?r.ch>=o&&(u=s.lastIndexOf(t,r.ch-o))!=-1:(u=s.indexOf(t,r.ch))!=-1)return{from:{line:r.line,ch:u},to:{line:r.line,ch:u+o}}}:this.matches=function(t,n){var r=n.line,o=t?s.length-1:0,u=s[o],a=i(e.getLine(r)),f=t?a.indexOf(u)+u.length:a.lastIndexOf(u);if(t?f>=n.ch||f!=u.length:f<=n.ch||f!=a.length-u.length)return;for(;;){if(t?!r:r==e.lineCount()-1)return;a=i(e.getLine(r+=t?-1:1)),u=s[t?--o:++o];if(o>0&&o<s.length-1){if(a!=u)return;continue}var l=t?a.lastIndexOf(u):a.indexOf(u)+u.length;if(t?l!=a.length-u.length:l!=u.length)return;var c={line:n.line,ch:f},h={line:r,ch:l};return{from:t?h:c,to:t?c:h}}}}}e.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){function r(e){var n={line:e,ch:0};return t.pos={from:n,to:n},t.atOccurrence=!1,!1}var t=this,n=this.cm.clipPos(e?this.pos.from:this.pos.to);for(;;){if(this.pos=this.matches(e,n))return this.atOccurrence=!0,this.pos.match||!0;if(e){if(!n.line)return r(0);n={line:n.line-1,ch:this.cm.getLine(n.line-1).length}}else{var i=this.cm.lineCount();if(n.line==i-1)return r(i);n={line:n.line+1,ch:0}}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(e){var t=this;this.atOccurrence&&(t.pos.to=this.cm.replaceRange(e,t.pos.from,t.pos.to))}},CodeMirror.defineExtension("getSearchCursor",function(t,n,r){return new e(this,t,n,r)})}(),function(){function t(){this.marked=[]}function n(e){return e._matchHighlightState||(e._matchHighlightState=new t)}function r(e){var t=n(e);for(var r=0;r<t.marked.length;++r)t.marked[r].clear();t.marked=[]}function i(t,i,s){r(t),s=typeof s!="undefined"?s:e;if(t.somethingSelected()&&t.getSelection().replace(/^\s+|\s+$/g,"").length>=s){var o=n(t),u=t.getSelection();t.operation(function(){if(t.lineCount()<2e3)for(var e=t.getSearchCursor(u);e.findNext();)(e.from().line!==t.getCursor(!0).line||e.from().ch!==t.getCursor(!0).ch)&&o.marked.push(t.markText(e.from(),e.to(),i))})}}var e=2;CodeMirror.defineExtension("matchHighlight",function(e,t){i(this,e,t)})}(),function(){function t(t){e.push(t),e.length>50&&e.shift()}function n(){return e[e.length-1]||""}function r(){return e.length>1&&e.pop(),n()}var e=[];CodeMirror.keyMap.emacs={"Ctrl-X":function(e){e.setOption("keyMap","emacs-Ctrl-X")},"Ctrl-W":function(e){t(e.getSelection()),e.replaceSelection("")},"Ctrl-Alt-W":function(e){t(e.getSelection()),e.replaceSelection("")},"Alt-W":function(e){t(e.getSelection())},"Ctrl-Y":function(e){e.replaceSelection(n())},"Alt-Y":function(e){e.replaceSelection(r())},"Ctrl-/":"undo","Shift-Ctrl--":"undo","Shift-Alt-,":"goDocStart","Shift-Alt-.":"goDocEnd","Ctrl-S":"findNext","Ctrl-R":"findPrev","Ctrl-G":"clearSearch","Shift-Alt-5":"replace","Ctrl-Z":"undo","Cmd-Z":"undo","Alt-/":"autocomplete",fallthrough:["basic","emacsy"]},CodeMirror.keyMap["emacs-Ctrl-X"]={"Ctrl-S":"save","Ctrl-W":"save",S:"saveAll",F:"open",U:"undo",K:"close",auto:"emacs",nofallthrough:!0}}()